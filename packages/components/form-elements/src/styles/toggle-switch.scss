// ========================================================
// Dependencies
// ========================================================
@use 'sass:color';
@import 'react-toggle/style.css';
@import '~@epr0t0type/bankai-lib-style-utils/src/styles/mixins/animations.scss';
@import '~@epr0t0type/bankai-lib-style-utils/src/styles/mixins/layout.scss';
@import '~@epr0t0type/bankai-lib-style-utils/src/styles/mixins/resets.scss';
@import '~@epr0t0type/bankai-lib-theme-utils/src/styles/mixins/states.scss';
@import '~@epr0t0type/bankai-lib-theme-utils/src/styles/utils/theme-utils.scss';

.bankai-toggle-switch, %bankai-toggle-switch {
    line-height: 1;
    display: inline-block;
    position: relative;

    .react-toggle-thumb {
        background-color: var(--bankai-form-toggle-switch-knob-color, bankai-light-theme('form-toggle-switch-knob-color'));
        border-color: var(--bankai-form-toggle-switch-knob-border-color, bankai-light-theme('form-toggle-switch-knob-border-color'));
    }

    .react-toggle--focus .react-toggle-thumb {
        @include bankai-focus-state-box-shadow;
    }

    .react-toggle:active:not(.react-toggle--disabled) .react-toggle-thumb {
        box-shadow: bankai-light-theme('form-toggle-switch-knob-box-shadow');
    }

    .react-toggle-track {
        box-shadow: bankai-light-theme('form-toggle-switch-track-box-shadow');
    }

    &__toggle:hover:not(.react-toggle--disabled) .react-toggle-track {
        background-color: var(--bankai-form-toggle-switch-track-hover-color, bankai-light-theme('form-toggle-switch-track-hover-color'));
    }

    .react-toggle--disabled {
        opacity: 1;
    }

    // stylelint-disable-next-line
    .react-toggle-track,
    .react-toggle--disabled:hover .react-toggle-track {
        background-color: var(--bankai-form-toggle-switch-track-color, bankai-light-theme('form-toggle-switch-track-color'));
    }

    // stylelint-disable-next-line no-descending-specificity
    .react-toggle--checked .react-toggle-thumb {
        background-color: var(--bankai-form-toggle-switch-on-knob-color, bankai-light-theme('form-toggle-switch-on-knob-color'));
        border-color: var(--bankai-form-toggle-switch-on-track-color, bankai-light-theme('form-toggle-switch-on-track-color'));
    }

    // stylelint-disable-next-line no-descending-specificity
    .react-toggle--checked .react-toggle-track,
    .react-toggle--checked.react-toggle--disabled:hover .react-toggle-track {
        background-color: var(--bankai-form-toggle-switch-on-track-color, bankai-light-theme('form-toggle-switch-on-track-color'));
    }

    // stylelint-disable-next-line no-descending-specificity
    &:hover .react-toggle--checked .react-toggle-track {
        background-color: var(--bankai-form-toggle-switch-on-hover-track-color, bankai-light-theme('form-toggle-switch-on-hover-track-color'));
    }

    &__icon-busy {
        @include bankai-rotate-infinite;
        color: var(--bankai-form-toggle-switch-busy-icon-color, bankai-light-theme('form-toggle-switch-busy-icon-color'));
        font-size: 2rem;
        margin: 2px;
        position: absolute;
        z-index: 2;
    }

    .react-toggle--checked + &__icon-busy {
        color: var(--bankai-form-toggle-switch-on-busy-icon-color, bankai-light-theme('form-toggle-switch-on-busy-icon-color'));
        left: 0;
    }

    .react-toggle:not(.react-toggle--checked) + &__icon-busy {
        right: 0;
    }

    // stylelint-disable-next-line
    .react-toggle--checked.react-toggle--focus .react-toggle-thumb {
        @include bankai-focus-state-box-shadow(var(--bankai-form-toggle-switch-on-focus-halo-color, bankai-light-theme('form-toggle-switch-on-focus-halo-color')));
    }

    .react-toggle--checked:active:not(.react-toggle--disabled) .react-toggle-thumb {
        box-shadow: 0 0 5px 5px var(--bankai-form-toggle-switch-on-focus-halo-color, bankai-light-theme('form-toggle-switch-on-focus-halo-color'));
    }

    &--is-disabled {
        opacity: bankai-light-theme('state-disabled-opacity');
    }
}
