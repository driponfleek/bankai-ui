import{c as L,j as z}from"./localeUtils-28c44f90.js";import{P as l}from"./index-f9722e9b.js";import{R as m,r as c}from"./index-c013ead5.js";import{q as ue,g as oe,t as ce,m as ie}from"./useDropdownToggle-76fed4f9.js";import{i as le,m as ae,a as fe,b as de}from"./extantPropsUtils-fb5f5426.js";import{a as A,d as pe}from"./PropTypes-94435e28.js";import{B as me}from"./BankaiSpinner-ca408781.js";import{B as ge}from"./BankaiChevronDown-9f738170.js";const ye=m.createContext(null),B={behavior:"stop"};function he(t){const e=c.useContext(ye),n=c.useRef(null),r=c.useRef(null);c.useLayoutEffect(()=>()=>{e==null||e.map.delete(r.current)},[]),c.useLayoutEffect(()=>{n.current!==r.current&&(e==null||e.map.delete(n.current)),n.current=r.current,r.current&&(e==null?void 0:e.map.get(r.current))!==t&&(e==null||e.map.set(r.current,t))});const s=t===(e==null?void 0:e.focusedItem);return[r,s,s?e==null?void 0:e.activeId:void 0]}const et=({scope:t,anchorItem:e,focusFirstItem:n=!1,scopeSelector:r="",activeId:s})=>{const u=c.useMemo(()=>new WeakMap,[]),[a,p]=c.useState(),g=`${r} [data-rw-focusable]`.trim(),d=()=>{const o=ue(t.current,g);return[o,o.find(i=>i.dataset.rwFocused==="")]},f=c.useMemo(()=>({size(){const[o]=d();return o.length},get:d,toDataItem:o=>u.get(o),first(){const[[o]]=d();return o},focus(o){(!o||u.has(o))&&p(o?u.get(o):void 0)},last(){const[o]=d();return o[o.length-1]},next({behavior:o}=B){const[i,v]=d();let y=i.indexOf(v)+1;return y>=i.length?o==="loop"?i[0]:o==="clear"?void 0:v:i[y]},prev({behavior:o}=B){const[i,v]=d();let y=Math.max(0,i.indexOf(v))-1;return y<0?o==="loop"?i[i.length-1]:o==="clear"?void 0:v:i[y]}}),[]);c.useLayoutEffect(()=>{if(!e){f.focus(null);return}const o=d()[0].find(i=>f.toDataItem(i)===e);f.focus(o)},[e]),c.useLayoutEffect(()=>{if(!t.current)return;const[,o]=d(),i=o!=null;(!i&&n||i&&!t.current.contains(o))&&(n?f.focus(f.first()):f.focus(null))});const w=c.useMemo(()=>({map:u,focusedItem:a,activeId:s}),[a,s]);return f.context=w,f.getFocused=c.useCallback(()=>a,[a]),f.hasFocused=()=>a!==void 0,f},ve=["className","children","dataItem","selected","disabled","onSelect","searchTerm"];function E(){return E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E.apply(this,arguments)}function xe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,u;for(u=0;u<r.length;u++)s=r[u],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const we={activeId:l.string,dataItem:l.any,selected:l.bool.isRequired,onSelect:l.func.isRequired,component:l.any};function W(t){let{className:e,children:n,dataItem:r,selected:s,disabled:u,onSelect:a}=t,p=xe(t,ve);const[g,d,f]=he(r),w=i=>{a&&!u&&a(r,i)};let o={"rw-state-focus":d,"rw-state-selected":s,"rw-state-disabled":u};return m.createElement("div",E({id:f,ref:g,role:"option","data-rw-option":"","data-rw-focused":d?"":void 0,"data-rw-focusable":u?void 0:"",tabIndex:-1,"aria-selected":!!s,className:L("rw-list-option",e,o),onClick:w},p),n)}W.propTypes=we;const be={className:l.string,component:l.string};function U({children:t,className:e,component:n="div"}){let r=n;return m.createElement(r,{tabIndex:"-1",role:"separator",className:L(e,"rw-list-optgroup")},t)}U.propTypes=be;function Se(t,e,n){const r=le(),{isEqual:s,effectHook:u=c.useEffect}=typeof n=="function"?{isEqual:n}:n,a=c.useRef();a.current=e;const p=c.useRef(null);u(()=>{if(p.current===null){const g=t();p.current=()=>{r()&&s(a.current,e)||(p.current=null,g&&g())}}return p.current}),c.useDebugValue(t)}var F=Object.prototype.hasOwnProperty;function $(t,e,n){for(n of t.keys())if(b(n,e))return n}function b(t,e){var n,r,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&b(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(s=r,s&&typeof s=="object"&&(s=$(e,s),!s)||!e.has(s))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(s=r[0],s&&typeof s=="object"&&(s=$(e,s),!s)||!b(r[1],e.get(s)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(F.call(t,n)&&++r&&!F.call(e,n)||!(n in e)||!b(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function Ie(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ee(t,e){let n=!0;const r=c.useRef();r.current?n=!!(e&&r.current.deps&&Ie(e,r.current.deps)):r.current={deps:e,result:t()};const s=n?r.current:{deps:e,result:t()};return r.current=s,s.result}function Re(t){const e=c.useRef(t);return e.current=t,e}function Le(t){const e=Re(t);c.useEffect(()=>()=>e.current(),[])}function Ce(t,e){const n=c.useRef(!0),r=c.useRef();Le(()=>{r.current&&r.current()}),Ee(()=>{if(n.current){n.current=!1;return}r.current&&r.current(),r.current=t()},e)}function Oe([t,e],[n,r]){return t===n&&b(e,r)}function Me(t,e,n){const[r,s]=c.useState(null),u=ae(n||s);return Se(()=>{if(!t)return;const a=new MutationObserver(u);return a.observe(t,e),()=>{a.disconnect()}},[t,e],{isEqual:Oe,effectHook:Ce}),n?void 0:r||[]}function Te(){return c.useState(null)}const P=t=>!t||typeof t=="function"?t:e=>{t.current=e};function je(t,e){const n=P(t),r=P(e);return s=>{n&&n(s),r&&r(s)}}function ke(t,e){return c.useMemo(()=>je(t,e),[t,e])}const De=["multiple","data","value","onChange","accessors","className","messages","disabled","renderItem","renderGroup","searchTerm","groupBy","elementRef","optionComponent","renderList"];function qe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,u;for(u=0;u<r.length;u++)s=r[u],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const Ve=["style","className","role","id","autocomplete","size","tabIndex","maxLength","name"],Ne=[/^aria-/,/^data-/,/^on[A-Z]\w+/];function _e(t){const e={};return Object.keys(t).forEach(n=>{(Ve.indexOf(n)!==-1||Ne.some(r=>!!n.match(r)))&&(e[n]=t[n])}),e}const Ae={data:l.array,dataKey:A,textField:A,onSelect:l.func,onMove:l.func,onHoverOption:l.func,optionComponent:l.elementType,renderItem:l.func,renderGroup:l.func,focusedItem:l.any,selectedItem:l.any,searchTerm:l.string,disabled:pe.acceptsArray,messages:l.shape({emptyList:l.func.isRequired})},Be=(t,e=!1)=>{const n=c.useCallback(()=>{if(!t)return;let r=t.querySelector("[data-rw-focused]");r&&r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"})},[t]);return Me(e?t:null,{subtree:!0,attributes:!0,attributeFilter:["data-rw-focused"]},n),n};function Fe(t,e,n){return(r,s)=>{if(t===!1){n(r,{dataItem:r,lastValue:e[0],originalEvent:s});return}const u=e.includes(r);n(u?e.filter(a=>a!==r):[...e,r],{dataItem:r,lastValue:e,action:u?"remove":"insert",originalEvent:s})}}const H=m.forwardRef(function(e,n){var r;let{multiple:s=!1,data:u=[],value:a,onChange:p,accessors:g,className:d,messages:f,disabled:w,renderItem:o,renderGroup:i,searchTerm:v,groupBy:y,elementRef:Z,optionComponent:J=W,renderList:M}=e,Q=qe(e,De);const X=fe(),T=ie(a,s),j=c.useMemo(()=>y?oe(y,u):void 0,[u,y]),[Y,K]=Te(),ee=ce(w),{emptyList:te}=de(f),ne=ke(K,Z),re=Fe(s,T,p),k=Be(Y,!0);let D=_e(Q);c.useImperativeHandle(n,()=>({scrollIntoView:k}),[k]);function q(h,S){const I=g.text(h),_=ee.includes(h),se=T.includes(h);return m.createElement(J,{dataItem:h,key:`item_${S}`,searchTerm:v,onSelect:re,disabled:_,selected:se},o?o({item:h,searchTerm:v,index:S,text:I,value:g.value(h),disabled:_}):I)}const V=j?j.map(([h,S],I)=>m.createElement("div",{role:"group",key:`group_${I}`},m.createElement(U,null,i?i({group:h}):h),S.map(q))):u.map(q),N=Object.assign({id:X,tabIndex:0,ref:ne},D,{"aria-multiselectable":!!s,className:L(d,"rw-list"),role:(r=D.role)!=null?r:"listbox",children:m.Children.count(V)?V:m.createElement("div",{className:"rw-list-empty"},te())});return M?M(N):m.createElement("div",N)});H.displayName="List";H.propTypes=Ae;const $e=(t,e)=>{t&&(t.removeAttribute("aria-activedescendant"),e&&t.setAttribute("aria-activedescendant",e))},tt=(t,e,n,r)=>{c.useEffect(()=>{$e(t.current,n?e:"")},[t,e,n,...r])},x=(t,e)=>typeof e=="function"?e(t):t==null?t:typeof e=="string"&&typeof t=="object"&&e in t?t[e]:t,G=(t,e)=>{const n=x(t,e);return n==null?"":String(n)};function Pe(t,e,n){return x(t,n)===x(e,n)}function R(t,e,n){const r=x(e,n);let s=-1;for(;++s<t.length;){const u=t[s];if(u===e||x(u,n)===r)return s}return-1}function ze(t,e,n){const r=R(t,e,n);return r!==-1?t[r]:e}const nt=(t,e)=>c.useMemo(()=>({text:n=>G(n,t),value:n=>x(n,e),indexOf:(n,r)=>R(n,r,e),matches:(n,r)=>Pe(n,r,e),findOrSelf:(n,r)=>ze(n,r,e),includes:(n,r)=>R(n,r,e)!==-1}),[t,e]),We={eq:(t,e)=>t===e,contains:(t,e)=>t.indexOf(e)!==-1,startsWith:(t,e)=>t.lastIndexOf(e,0)===0};function Ue(t,e){if(t===!1)return null;if(typeof t=="function")return t;const n=We[t===!0?"startsWith":t||"eq"];return(r,s)=>{let u=G(r,e);return n(u.toLowerCase(),s.toLowerCase())}}function rt(t,e,n="",r){return c.useMemo(()=>{const s=Ue(e,r);return!s||!n.trim()?t:t.filter((u,a)=>s(u,n,a))},[t,e,n,r])}const C=t=>{const{baseCls:e}=t;return z(me,{contextCls:`${e}__busy-icon`})};C.propTypes={baseCls:l.string};const st=C;C.__docgenInfo={description:"",methods:[],displayName:"BusySpinner",props:{baseCls:{type:{name:"string"},required:!1,description:""}}};const O=t=>{const{baseCls:e}=t;return z(ge,{contextCls:`${e}__select-icon`})};O.propTypes={baseCls:l.string};const ut=O;O.__docgenInfo={description:"",methods:[],displayName:"SelectIcon",props:{baseCls:{type:{name:"string"},required:!1,description:""}}};export{st as B,ye as F,W as L,ut as S,rt as a,et as b,tt as c,H as d,Le as e,he as f,We as p,$e as s,nt as u};
//# sourceMappingURL=SelectIcon-2c086e1b.js.map
