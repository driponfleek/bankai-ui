import{c as ae,j as R}from"./localeUtils-c1277a3c.js";import{P as n}from"./index-f9722e9b.js";import{d as me}from"./index-062a6568.js";import{R as p,r as j}from"./index-c013ead5.js";import{o as pe,k as Y,l as de,d as fe,m as M,W as he,f as be,p as ge,c as ye,n as ee,q as ve}from"./extantPropsUtils-9e46e3af.js";import{I as Ce,B as ne}from"./Button-277fc47a.js";import{u as Pe}from"./Localization-7d465675.js";import{r as re}from"./index-e74941a2.js";import{d as D}from"./PropTypes-94435e28.js";import{B as Ie}from"./BankaiChevronUp-b04ca193.js";import{B as xe}from"./BankaiChevronDown-20ea0b4e.js";function De(r){r===void 0&&(r=pe());try{var e=r.activeElement;return!e||!e.nodeName?null:e}catch{return r.body}}const Ne=["disabled","readOnly","placeholder","innerRef","min","max","localizer","editing"];function T(){return T=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},T.apply(this,arguments)}function we(r,e){if(r==null)return{};var t={},s=Object.keys(r),a,i;for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}let Oe=r=>(r||"").trim()==="-";function qe(r,e){let t=e.decimalCharacter(),[s,a]=r.split(t);return!!(a&&a.match(/0+$/))}function Ve(r,e){let t=e.decimalCharacter(),s=r.length-1;if(r.length<1)return!1;let a=r[s];return a===t&&r.indexOf(a)===s}class $ extends p.Component{constructor(...e){super(...e),this.state={},this.handleBlur=t=>{let s=this.state.stringValue,a=this.parseNumber(s);this.isIntermediateValue(a,s)&&(isNaN(a)&&(a=null),this.props.onChange(a,t))},this.handleChange=t=>{let{value:s,onChange:a}=this.props,i=t.target.value,u=this.parseNumber(i),l=this.isIntermediateValue(u,i);if(i==null||i.trim()===""){this.setStringValue(""),a(null,t);return}l?this.setStringValue(i):u!==s?a(u,t):i!=this.state.stringValue&&this.setStringValue(i)}}getSnapshotBeforeUpdate({editing:e}){return{reselectText:!e&&this.props.editing&&this.isSelectingAllText()}}static getDerivedStateFromProps(e,t){let{value:s,editing:a,localizer:i}=e,u=i.decimalCharacter();const l=s==null||isNaN(s)?"":a?(""+s).replace(".",u):i.formatNumber(s);return t.lastValueFromProps!==l?{stringValue:l,lastValueFromProps:l}:null}componentDidUpdate(e,t,{reselectText:s}){s&&re.findDOMNode(this).select()}setStringValue(e){this.setState({stringValue:e})}isIntermediateValue(e,t){let{localizer:s,min:a}=this.props;return!!(e<a||Oe(t)||Ve(t,s)||qe(t,s))}isSelectingAllText(){const e=Y&&re.findDOMNode(this);return Y&&De()===e&&e.selectionStart===0&&e.selectionEnd===e.value.length}parseNumber(e){let{localizer:t,parse:s}=this.props;return s?s(e,t):t.parseNumber(e)}render(){let e=this.props,{disabled:t,readOnly:s,placeholder:a,innerRef:i,min:u,max:l}=e,c=we(e,Ne),f=this.state.stringValue;return p.createElement(Ce,T({},c,{ref:i,inputMode:"numeric",className:"rw-widget-input",onChange:this.handleChange,onBlur:this.handleBlur,"aria-valuenow":f,"aria-valuemin":isFinite(u)?u:void 0,"aria-valuemax":isFinite(l)?l:void 0,disabled:t,readOnly:s,placeholder:a,value:f}))}}$.defaultProps={value:null,editing:!1};$.propTypes={value:n.number,editing:n.bool,placeholder:n.string,localizer:n.object.isRequired,parse:n.func,min:n.number,max:n.number,disabled:D,readOnly:D,onChange:n.func.isRequired};const Ke=["className","containerClassName","disabled","readOnly","value","min","max","incrementIcon","decrementIcon","placeholder","autoFocus","tabIndex","parse","name","onChange","messages","format","onKeyDown","onKeyPress","onKeyUp","inputProps","precision","step"];function N(){return N=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},N.apply(this,arguments)}function _e(r,e){if(r==null)return{};var t={},s=Object.keys(r),a,i;for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function Ue(r){let e,t;const s=()=>clearTimeout(t);return t=window.setTimeout(e=()=>{t=window.setTimeout(e,35),r()},500),s}function te(r,e,t){return t=t??1/0,e=e??-1/0,r==null||r===""?null:Math.max(Math.min(typeof r=="string"?parseInt(r):r,t),e)}const ke={value:n.number,onChange:n.func,min:n.number,max:n.number,step:n.number,precision:n.oneOfType([n.number,n.oneOf(["auto"])]),format:n.any,parse:n.func,incrementIcon:n.node,decrementIcon:n.node,tabIndex:n.any,name:n.string,placeholder:n.string,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,autoFocus:n.bool,disabled:D,readOnly:D,containerClassName:n.string,inputProps:n.object,messages:n.shape({increment:n.string,decrement:n.string}),localizer:n.object},Fe={incrementIcon:ge,decrementIcon:ye,min:-1/0,max:1/0,step:1,precision:"auto"};function S(r){const e=de(r,{value:"onChange"}),{className:t,containerClassName:s,disabled:a,readOnly:i,value:u,min:l,max:c,incrementIcon:f,decrementIcon:h,placeholder:O,autoFocus:q,tabIndex:V,parse:K,name:_,onChange:U,messages:b,format:g,onKeyDown:k,onKeyPress:F,onKeyUp:I,inputProps:oe,precision:W,step:L}=e,ie=_e(e,Ke),E=Pe(b,{number:g}),H=j.useRef(null),Z=j.useRef(null),y=j.useRef(null),[le,G]=fe(H,r,{willHandle(o){o&&ce()}}),B=M((o,m)=>{m&&m.persist();let P=(o==="UP"?J:Q)(m);o==="UP"&&P===c||o==="DOWN"&&P===l?v():y.current||(y.current=Ue(()=>{B(o,m)}))}),v=M(()=>{y.current&&(y.current(),y.current=null)}),ue=M(o=>{if(i)return;let m=o.key;ee(k,[o]),!o.defaultPrevented&&(m==="End"&&isFinite(c)?x(c,o):m==="Home"&&isFinite(l)?x(l,o):m==="ArrowDown"?(o.preventDefault(),Q(o)):m==="ArrowUp"&&(o.preventDefault(),J(o)))}),x=(o,m=null)=>{let d=te(o,l,c);u!==d&&ee(U,[d,{rawValue:o,originalEvent:m,lastValue:u}])};function ce(){var o;(o=Z.current)==null||o.focus()}function J(o){return X(L,o)}function Q(o){return X(-L,o)}function X(o,m){const d=(u||0)+o;let P=W==="auto"?Math.max(se(u||0),se(o)):W;return x(P!=null?parseFloat(d.toFixed(P)):d,m),d}const C=te(u,l,c);return p.createElement(he,N({},ie,{focused:G,disabled:a,readOnly:i,onKeyDown:ue},le,{ref:H,className:ae(t,"rw-number-picker")}),p.createElement(be,{className:s},p.createElement($,N({},oe,{role:"spinbutton",tabIndex:V,value:C,placeholder:O,autoFocus:q,editing:G,localizer:E,parse:K,name:_,min:l,max:c,disabled:a,readOnly:i,onChange:x,onKeyPress:F,onKeyUp:I,innerRef:Z})),p.createElement("span",{className:"rw-input-addon rw-number-picker-spinners"},p.createElement(ne,{icon:f,className:"rw-picker-btn",disabled:C===c||a||i,label:E.messages.increment({value:C,min:l,max:c}),onMouseUp:()=>v(),onMouseDown:o=>B("UP",o),onMouseLeave:()=>v()}),p.createElement(ne,{icon:h,className:"rw-picker-btn",disabled:C===l||a||i,label:E.messages.decrement({value:C,min:l,max:c}),onMouseUp:()=>v(),onMouseDown:o=>B("DOWN",o),onMouseLeave:()=>v()}))))}S.propTypes=ke;S.defaultProps=Fe;function se(r){if(!isFinite(r))return 0;let e=1,t=0;for(;Math.round(r*e)/e!==r;)e*=10,t++;return t}const z=r=>{const{baseCls:e}=r;return R(Ie,{contextCls:`${e}__increment-icon`})};z.propTypes={baseCls:n.string};const Ee=z;z.__docgenInfo={description:"",methods:[],displayName:"IncrementIcon",props:{baseCls:{type:{name:"string"},required:!1,description:""}}};const A=r=>{const{baseCls:e}=r;return R(xe,{contextCls:`${e}__decrement-icon`})};A.propTypes={baseCls:n.string};const Be=A;A.__docgenInfo={description:"",methods:[],displayName:"DecrementIcon",props:{baseCls:{type:{name:"string"},required:!1,description:""}}};const w=r=>{const{contextCls:e,hasError:t,onBlur:s,onFocus:a,onKeyDown:i,onKeyPress:u,onKeyUp:l,renderDecrementIcon:c,renderIncrementIcon:f}=r,h="bankai-number-picker",O=ve(r),q={[`${h}--error`]:t},V=f({baseCls:h}),K=c({baseCls:h}),_=me(b=>{const{onChangeComplete:g}=r;g(b)},300),U=b=>{const{onChange:g,name:k,value:F}=r;if(b!==F){const I={name:k,newValue:b};g(I),_(I)}};return R(S,{...O,className:ae(h,q,e),decrementIcon:K,incrementIcon:V,onBlur:s,onChange:U,onFocus:a,onKeyDown:i,onKeyPress:u,onKeyUp:l})};w.defaultProps={hasError:!1,isDisabled:!1,isReadOnly:!1,shouldAutoFocus:!1,inputProps:{},onBlur:()=>Promise.resolve(),onChange:()=>Promise.resolve(),onChangeComplete:()=>Promise.resolve(),onFocus:()=>Promise.resolve(),onKeyDown:()=>Promise.resolve(),onKeyPress:()=>Promise.resolve(),onKeyUp:()=>Promise.resolve(),renderIncrementIcon:Ee,renderDecrementIcon:Be};w.propTypes={contextCls:n.string,format:n.string,id:n.string,name:n.string,placeholder:n.string,max:n.number,min:n.number,precision:n.oneOfType([n.number,n.string]),step:n.number,value:n.number,hasError:n.bool,isDisabled:n.bool,isReadOnly:n.bool,shouldAutoFocus:n.bool,inputProps:n.object,messages:n.object,onBlur:n.func,onChange:n.func,onChangeComplete:n.func,onFocus:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,renderDecrementIcon:n.func,renderIncrementIcon:n.func};const Je=w;w.__docgenInfo={description:"",methods:[],displayName:"NumberPicker",props:{hasError:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isDisabled:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isReadOnly:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},shouldAutoFocus:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},inputProps:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},onBlur:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onChangeComplete:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onFocus:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onKeyDown:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onKeyPress:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onKeyUp:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},renderIncrementIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiChevronUp contextCls={\`\${baseCls}__increment-icon\`} />;
}`,computed:!1},type:{name:"func"},required:!1,description:""},renderDecrementIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiChevronDown contextCls={\`\${baseCls}__decrement-icon\`} />;
}`,computed:!1},type:{name:"func"},required:!1,description:""},contextCls:{type:{name:"string"},required:!1,description:""},format:{type:{name:"string"},required:!1,description:""},id:{type:{name:"string"},required:!1,description:""},name:{type:{name:"string"},required:!1,description:""},placeholder:{type:{name:"string"},required:!1,description:""},max:{type:{name:"number"},required:!1,description:""},min:{type:{name:"number"},required:!1,description:""},precision:{type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1,description:""},step:{type:{name:"number"},required:!1,description:""},value:{type:{name:"number"},required:!1,description:""},messages:{type:{name:"object"},required:!1,description:""}}};export{Je as N};
//# sourceMappingURL=NumberPicker-06817629.js.map
