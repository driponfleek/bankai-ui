import{c as V,j as Je}from"./localeUtils-d4c6437e.js";import{p as o,P as e}from"./index-f9722e9b.js";import{r as a}from"./index-c013ead5.js";import{u as ue,a as G,b as Qe,d as Xe,e as Ye,W as Ze,f as et,c as tt,n as pe,S as ot,g as nt}from"./extantPropsUtils-6b1b0e10.js";import{I as st}from"./Button-6a98e170.js";import{u as at,a as rt,b as lt,c as it,F as ut,d as pt,B as dt,S as ct}from"./SelectIcon-2f669a47.js";import{P as ft,u as mt}from"./useDropdownToggle-31f1bc03.js";import{I as yt}from"./InputAddon-66f5e142.js";import{a as W,d as de,m as $}from"./PropTypes-94435e28.js";const bt=["id","className","containerClassName","placeholder","autoFocus","textField","dataKey","autoSelectMatches","focusFirstItem","value","defaultValue","onChange","open","defaultOpen","onToggle","filter","busy","disabled","readOnly","selectIcon","hideCaret","hideEmptyPopup","busySpinner","dropUp","tabIndex","popupTransition","name","onSelect","onKeyDown","onBlur","onFocus","inputProps","listProps","popupProps","groupBy","renderListItem","renderListGroup","optionComponent","listComponent","popupComponent","data","messages"];function C(){return C=Object.assign||function(r){for(var l=1;l<arguments.length;l++){var u=arguments[l];for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&(r[n]=u[n])}return r},C.apply(this,arguments)}function gt(r,l){if(r==null)return{};var u={},n=Object.keys(r),c,f;for(f=0;f<n.length;f++)c=n[f],!(l.indexOf(c)>=0)&&(u[c]=r[c]);return u}function ht(r,l,u){if(!l.trim())return-1;for(let n=0;n<r.length;n++)if(u(r[n]).toLowerCase()===l)return n;return-1}let vt={value:o.any,onChange:o.func,open:o.bool,onToggle:o.func,renderListItem:o.func,listComponent:o.elementType,renderListGroup:o.func,groupBy:W,data:o.array,dataKey:W,textField:W,name:o.string,hideEmptyPopup:o.bool,hideCaret:o.bool,onSelect:o.func,autoFocus:o.bool,disabled:de.acceptsArray,readOnly:de,busy:o.bool,selectIcon:o.node,busySpinner:o.node,dropUp:o.bool,popupTransition:o.elementType,placeholder:o.string,containerClassName:o.string,inputProps:o.object,listProps:o.object,messages:o.shape({openCombobox:$,emptyList:$,emptyFilter:$})};const z=a.forwardRef(function(l,u){let{id:n,className:c,containerClassName:f,placeholder:L,autoFocus:j,textField:b,dataKey:K,autoSelectMatches:R,focusFirstItem:A=!1,value:N,defaultValue:ce="",onChange:fe,open:me,defaultOpen:ye=!1,onToggle:be,filter:J=!0,busy:P,disabled:Q,readOnly:S,selectIcon:ge=tt,hideCaret:q,hideEmptyPopup:he,busySpinner:X,dropUp:Y,tabIndex:ve,popupTransition:Ce,name:xe,onSelect:Ie,onKeyDown:Oe,onBlur:Pe,onFocus:Se,inputProps:y,listProps:qe,popupProps:Fe,groupBy:De,renderListItem:we,renderListGroup:Te,optionComponent:Ee,listComponent:Ve=pt,popupComponent:Be=ft,data:F=[],messages:Le}=l,je=gt(l,bt),[x,Ke]=ue(N,ce,fe);const[i,Re]=ue(me,ye,be),D=a.useRef(null),_=a.useRef(null),Z=a.useRef(null),[Ae,I]=a.useState(null),w=a.useRef(!1),ee=G(n,"_input"),te=G(n,"_listbox"),oe=G(n,"_listbox_active_option"),d=at(b,K),U=Qe(Le),m=mt(i,Re),O=Q===!0,ne=!!S,g=rt(F,J,w.current?d.text(x):void 0,d.text),se=a.useMemo(()=>g[d.indexOf(g,x)],[g,x,d]),p=lt({activeId:oe,scope:D,focusFirstItem:A,anchorItem:i?se:void 0}),[Ne,ae]=Xe(D,{disabled:O,onBlur:Pe,onFocus:Se},{didHandle(t){t?T({preventScroll:!0}):(w.current=!1,m.close(),I(null),p.focus(void 0))}});it(D,oe,i,[p.getFocused()]);const _e=t=>{S||O||(t.preventDefault(),T(),m())},re=(t,s)=>{m.close(),w.current=!1,I(null),pe(Ie,[t,{originalEvent:s}]),le(t,s,!0),T({preventScroll:!0})},Ue=({key:t})=>{(t==="Backspace"||t==="Delete")&&p.focus(null)},ke=t=>{let s=R?ht(F,t.target.value.toLowerCase(),d.text):-1;w.current=!0,I(null);const h=s===-1?t.target.value:F[s];le(h,t),h?m.open():m.close()},Me=t=>{if(S)return;let{key:s,altKey:h,shiftKey:ie}=t;if(pe(Oe,[t]),t.defaultPrevented)return;const ze=v=>v!=null&&re(v,t),E=v=>{v&&(I(p.toDataItem(v)),p.focus(v))};if(s==="End"&&i&&!ie)t.preventDefault(),E(p.last());else if(s==="Home"&&i&&!ie)t.preventDefault(),E(p.first());else if(s==="Escape"&&i)t.preventDefault(),I(null),m.close();else if(s==="Enter"&&i)t.preventDefault(),ze(p.getFocused());else if(s==="ArrowDown")if(t.preventDefault(),i)E(p.next());else return m.open();else if(s==="ArrowUp"){if(t.preventDefault(),h)return m.close();i&&E(p.prev())}};function T(t){_.current&&_.current.focus(t)}function le(t,s,h=!1){Ke(t,{lastValue:x,originalEvent:s,source:h?"listbox":"input"})}a.useImperativeHandle(u,()=>({focus:T}));let He=Ye(ae,i),k=d.findOrSelf(g,x),Ge=d.text(Ae||k),We=J?"list":"none",M=i&&(!he||!!g.length),$e=(y==null?void 0:y.readOnly)!=null?y==null?void 0:y.readOnly:S,H=!1;return q?P&&(H=a.createElement("span",{"aria-hidden":"true",className:"rw-btn rw-picker-caret"},X||ot)):H=a.createElement(yt,{busy:P,icon:ge,spinner:X,onClick:_e,disabled:!!O||ne,label:U.openCombobox()}),a.createElement(Ze,C({},je,{ref:D,open:i,dropUp:Y,focused:ae,disabled:O,readOnly:ne},Ne,{onKeyDown:Me,className:V(c,"rw-combobox")}),a.createElement(et,{className:V(f,q&&"rw-widget-input",q&&!P&&"rw-hide-caret")},a.createElement(st,C({},y,{role:"combobox",name:xe,id:ee,className:V(y&&y.className,"rw-combobox-input",!q&&"rw-widget-input"),autoFocus:j,tabIndex:ve,disabled:O,readOnly:$e,"aria-busy":!!P,"aria-owns":te,"aria-autocomplete":We,"aria-expanded":i,"aria-haspopup":!0,placeholder:L,value:Ge,onChange:ke,onKeyDown:Ue,ref:_})),H),a.createElement(ut.Provider,{value:p.context},He&&a.createElement(Be,C({},Fe,{dropUp:Y,open:M,transition:Ce,onEntering:()=>Z.current.scrollIntoView()}),a.createElement(Ve,C({},qe,{id:te,tabIndex:-1,data:g,groupBy:De,disabled:Q,accessors:d,renderItem:we,renderGroup:Te,optionComponent:Ee,value:se,searchTerm:k&&d.text(k)||"","aria-hidden":!M,"aria-labelledby":ee,"aria-live":M?"polite":void 0,onChange:(t,s)=>re(t,s.originalEvent),ref:Z,messages:{emptyList:F.length?U.emptyFilter:U.emptyList}})))))});z.displayName="Combobox";z.propTypes=vt;const B=r=>{const{contextCls:l,hasError:u,onChange:n,onSelect:c,onToggle:f,renderBusySpinner:L,renderSelectIcon:j}=r,b="bankai-combobox",K=nt(r),R={[`${b}--error`]:u},A=L({baseCls:b}),N=j({baseCls:b});return Je(z,{...K,className:V(b,R,l),busySpinner:A,selectIcon:N,onChange:n,onSelect:c,onToggle:f})};B.defaultProps={shouldAutoFocus:!1,shouldAutoSelectMatches:!1,hasError:!1,isBusy:!1,isDefaultOpen:!1,isDisabled:!1,isReadOnly:!1,shouldDropUp:!1,shouldFocustFirstItem:!1,data:[],onChange:()=>Promise.resolve(),onSelect:()=>Promise.resolve(),onToggle:()=>Promise.resolve(),renderBusySpinner:dt,renderSelectIcon:ct};B.propTypes={contextCls:e.string,id:e.string,name:e.string,placeholder:e.string,hasError:e.bool,isBusy:e.bool,isDefaultOpen:e.bool,isDisabled:e.bool,isOpen:e.bool,isReadOnly:e.bool,shouldAutoFocus:e.bool,shouldAutoSelectMatches:e.bool,shouldDropUp:e.bool,shouldFocustFirstItem:e.bool,shouldHideCaret:e.bool,shouldHideEmptyPopup:e.bool,data:e.array,disabledOptions:e.array,inputProps:e.object,listProps:e.object,messages:e.object,dataKey:e.oneOfType([e.string,e.func]),defaultValue:e.oneOfType([e.string,e.array,e.object]),filter:e.oneOfType([e.string,e.func,e.bool]),groupBy:e.oneOfType([e.string,e.func]),listComponent:e.oneOfType([e.element,e.func]),textField:e.oneOfType([e.string,e.func]),value:e.oneOfType([e.string,e.array,e.object]),onChange:e.func,onSelect:e.func,onToggle:e.func,renderBusySpinner:e.func,renderListGroup:e.func,renderListItem:e.func,renderSelectIcon:e.func};const wt=B;B.__docgenInfo={description:"",methods:[],displayName:"Combobox",props:{shouldAutoFocus:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},shouldAutoSelectMatches:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},hasError:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isBusy:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isDefaultOpen:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isDisabled:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isReadOnly:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},shouldDropUp:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},shouldFocustFirstItem:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},data:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onSelect:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onToggle:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},renderBusySpinner:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiSpinner contextCls={\`\${baseCls}__busy-icon\`} />;
}`,computed:!1},type:{name:"func"},required:!1,description:""},renderSelectIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiChevronDown contextCls={\`\${baseCls}__select-icon\`} />;
}`,computed:!1},type:{name:"func"},required:!1,description:""},contextCls:{type:{name:"string"},required:!1,description:""},id:{type:{name:"string"},required:!1,description:""},name:{type:{name:"string"},required:!1,description:""},placeholder:{type:{name:"string"},required:!1,description:""},isOpen:{type:{name:"bool"},required:!1,description:""},shouldHideCaret:{type:{name:"bool"},required:!1,description:""},shouldHideEmptyPopup:{type:{name:"bool"},required:!1,description:""},disabledOptions:{type:{name:"array"},required:!1,description:""},inputProps:{type:{name:"object"},required:!1,description:""},listProps:{type:{name:"object"},required:!1,description:""},messages:{type:{name:"object"},required:!1,description:""},dataKey:{type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1,description:""},defaultValue:{type:{name:"union",value:[{name:"string"},{name:"array"},{name:"object"}]},required:!1,description:""},filter:{type:{name:"union",value:[{name:"string"},{name:"func"},{name:"bool"}]},required:!1,description:""},groupBy:{type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1,description:""},listComponent:{type:{name:"union",value:[{name:"element"},{name:"func"}]},required:!1,description:""},textField:{type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1,description:""},value:{type:{name:"union",value:[{name:"string"},{name:"array"},{name:"object"}]},required:!1,description:""},renderListGroup:{type:{name:"func"},required:!1,description:""},renderListItem:{type:{name:"func"},required:!1,description:""}}};export{wt as B};
//# sourceMappingURL=Combobox-99d932e7.js.map
