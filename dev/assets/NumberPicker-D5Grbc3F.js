import{j as R}from"./jsx-runtime-DN5Rltsz.js";import{P as n,c as ae}from"./localeUtils--UUmbdnw.js";import{d as pe}from"./index-BtngOa46.js";import{R as m,r as k}from"./iframe-X-brMXKZ.js";import{o as me,k as Y,q as de,d as fe,j as B,W as he,f as be,n as ee,c as ge,y as ye,z as ve}from"./extantPropsUtils-DAFKIOU6.js";import{I as Ce,B as ne}from"./Button-B2Cdr0Hb.js";import{u as Pe}from"./Localization-D1UdyYev.js";import{r as re}from"./blocks-W-vzZJEX.js";import{d as D}from"./PropTypes-4_mVf3cx.js";import{B as Ie}from"./BankaiChevronUp-BSpTC_KA.js";import{B as xe}from"./BankaiChevronDown-BMAwoy6z.js";function De(r){r===void 0&&(r=me());try{var e=r.activeElement;return!e||!e.nodeName?null:e}catch{return r.body}}const Ne=["disabled","readOnly","placeholder","innerRef","min","max","localizer","editing"];function M(){return M=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},M.apply(this,arguments)}function we(r,e){if(r==null)return{};var t={},s=Object.keys(r),a,i;for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}let Oe=r=>(r||"").trim()==="-";function qe(r,e){let t=e.decimalCharacter(),[s,a]=r.split(t);return!!(a&&a.match(/0+$/))}function Ve(r,e){let t=e.decimalCharacter(),s=r.length-1;if(r.length<1)return!1;let a=r[s];return a===t&&r.indexOf(a)===s}class T extends m.Component{constructor(...e){super(...e),this.state={},this.handleBlur=t=>{let s=this.state.stringValue,a=this.parseNumber(s);this.isIntermediateValue(a,s)&&(isNaN(a)&&(a=null),this.props.onChange(a,t))},this.handleChange=t=>{let{value:s,onChange:a}=this.props,i=t.target.value,u=this.parseNumber(i),l=this.isIntermediateValue(u,i);if(i==null||i.trim()===""){this.setStringValue(""),a(null,t);return}l?this.setStringValue(i):u!==s?a(u,t):i!=this.state.stringValue&&this.setStringValue(i)}}getSnapshotBeforeUpdate({editing:e}){return{reselectText:!e&&this.props.editing&&this.isSelectingAllText()}}static getDerivedStateFromProps(e,t){let{value:s,editing:a,localizer:i}=e,u=i.decimalCharacter();const l=s==null||isNaN(s)?"":a?(""+s).replace(".",u):i.formatNumber(s);return t.lastValueFromProps!==l?{stringValue:l,lastValueFromProps:l}:null}componentDidUpdate(e,t,{reselectText:s}){s&&re.findDOMNode(this).select()}setStringValue(e){this.setState({stringValue:e})}isIntermediateValue(e,t){let{localizer:s,min:a}=this.props;return!!(e<a||Oe(t)||Ve(t,s)||qe(t,s))}isSelectingAllText(){const e=Y&&re.findDOMNode(this);return Y&&De()===e&&e.selectionStart===0&&e.selectionEnd===e.value.length}parseNumber(e){let{localizer:t,parse:s}=this.props;return s?s(e,t):t.parseNumber(e)}render(){let e=this.props,{disabled:t,readOnly:s,placeholder:a,innerRef:i,min:u,max:l}=e,c=we(e,Ne),f=this.state.stringValue;return m.createElement(Ce,M({},c,{ref:i,inputMode:"numeric",className:"rw-widget-input",onChange:this.handleChange,onBlur:this.handleBlur,"aria-valuenow":f,"aria-valuemin":isFinite(u)?u:void 0,"aria-valuemax":isFinite(l)?l:void 0,disabled:t,readOnly:s,placeholder:a,value:f}))}}T.defaultProps={value:null,editing:!1};T.propTypes={value:n.number,editing:n.bool,placeholder:n.string,localizer:n.object.isRequired,parse:n.func,min:n.number,max:n.number,disabled:D,readOnly:D,onChange:n.func.isRequired};const Ke=["className","containerClassName","disabled","readOnly","value","min","max","incrementIcon","decrementIcon","placeholder","autoFocus","tabIndex","parse","name","onChange","messages","format","onKeyDown","onKeyPress","onKeyUp","inputProps","precision","step"];function N(){return N=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},N.apply(this,arguments)}function _e(r,e){if(r==null)return{};var t={},s=Object.keys(r),a,i;for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function Ue(r){let e,t;const s=()=>clearTimeout(t);return t=window.setTimeout(e=()=>{t=window.setTimeout(e,35),r()},500),s}function te(r,e,t){return t=t??1/0,e=e??-1/0,r==null||r===""?null:Math.max(Math.min(typeof r=="string"?parseInt(r):r,t),e)}const Fe={value:n.number,onChange:n.func,min:n.number,max:n.number,step:n.number,precision:n.oneOfType([n.number,n.oneOf(["auto"])]),format:n.any,parse:n.func,incrementIcon:n.node,decrementIcon:n.node,tabIndex:n.any,name:n.string,placeholder:n.string,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,autoFocus:n.bool,disabled:D,readOnly:D,containerClassName:n.string,inputProps:n.object,messages:n.shape({increment:n.string,decrement:n.string}),localizer:n.object},je={incrementIcon:ye,decrementIcon:ge,min:-1/0,max:1/0,step:1,precision:"auto"};function S(r){const e=de(r,{value:"onChange"}),{className:t,containerClassName:s,disabled:a,readOnly:i,value:u,min:l,max:c,incrementIcon:f,decrementIcon:h,placeholder:w,autoFocus:O,tabIndex:q,parse:V,name:K,onChange:_,messages:b,format:g,onKeyDown:U,onKeyPress:F,onKeyUp:I,inputProps:oe,precision:W,step:L}=e,ie=_e(e,Ke),j=Pe(b,{number:g}),H=k.useRef(null),Z=k.useRef(null),y=k.useRef(null),[le,G]=fe(H,r,{willHandle(o){o&&ce()}}),E=B((o,p)=>{p&&p.persist();let P=(o==="UP"?J:Q)(p);o==="UP"&&P===c||o==="DOWN"&&P===l?v():y.current||(y.current=Ue(()=>{E(o,p)}))}),v=B(()=>{y.current&&(y.current(),y.current=null)}),ue=B(o=>{if(i)return;let p=o.key;ee(U,[o]),!o.defaultPrevented&&(p==="End"&&isFinite(c)?x(c,o):p==="Home"&&isFinite(l)?x(l,o):p==="ArrowDown"?(o.preventDefault(),Q(o)):p==="ArrowUp"&&(o.preventDefault(),J(o)))}),x=(o,p=null)=>{let d=te(o,l,c);u!==d&&ee(_,[d,{rawValue:o,originalEvent:p,lastValue:u}])};function ce(){var o;(o=Z.current)==null||o.focus()}function J(o){return X(L,o)}function Q(o){return X(-L,o)}function X(o,p){const d=(u||0)+o;let P=W==="auto"?Math.max(se(u||0),se(o)):W;return x(P!=null?parseFloat(d.toFixed(P)):d,p),d}const C=te(u,l,c);return m.createElement(he,N({},ie,{focused:G,disabled:a,readOnly:i,onKeyDown:ue},le,{ref:H,className:ae(t,"rw-number-picker")}),m.createElement(be,{className:s},m.createElement(T,N({},oe,{role:"spinbutton",tabIndex:q,value:C,placeholder:w,autoFocus:O,editing:G,localizer:j,parse:V,name:K,min:l,max:c,disabled:a,readOnly:i,onChange:x,onKeyPress:F,onKeyUp:I,innerRef:Z})),m.createElement("span",{className:"rw-input-addon rw-number-picker-spinners"},m.createElement(ne,{icon:f,className:"rw-picker-btn",disabled:C===c||a||i,label:j.messages.increment({value:C,min:l,max:c}),onMouseUp:()=>v(),onMouseDown:o=>E("UP",o),onMouseLeave:()=>v()}),m.createElement(ne,{icon:h,className:"rw-picker-btn",disabled:C===l||a||i,label:j.messages.decrement({value:C,min:l,max:c}),onMouseUp:()=>v(),onMouseDown:o=>E("DOWN",o),onMouseLeave:()=>v()}))))}S.propTypes=Fe;S.defaultProps=je;function se(r){if(!isFinite(r))return 0;let e=1,t=0;for(;Math.round(r*e)/e!==r;)e*=10,t++;return t}const $=r=>{const{baseCls:e}=r;return R.jsx(Ie,{contextCls:`${e}__increment-icon`})};$.propTypes={baseCls:n.string};$.__docgenInfo={description:"",methods:[],displayName:"IncrementIcon",props:{baseCls:{description:"",type:{name:"string"},required:!1}}};const z=r=>{const{baseCls:e}=r;return R.jsx(xe,{contextCls:`${e}__decrement-icon`})};z.propTypes={baseCls:n.string};z.__docgenInfo={description:"",methods:[],displayName:"DecrementIcon",props:{baseCls:{description:"",type:{name:"string"},required:!1}}};const A=r=>{const{contextCls:e,hasError:t,onBlur:s,onFocus:a,onKeyDown:i,onKeyPress:u,onKeyUp:l,renderDecrementIcon:c,renderIncrementIcon:f}=r,h="bankai-number-picker",w=ve(r),O={[`${h}--error`]:t},q=f({baseCls:h}),V=c({baseCls:h}),K=pe(b=>{const{onChangeComplete:g}=r;g(b)},300),_=b=>{const{onChange:g,name:U,value:F}=r;if(b!==F){const I={name:U,newValue:b};g(I),K(I)}};return R.jsx(S,{...w,className:ae(h,O,e),decrementIcon:V,incrementIcon:q,onBlur:s,onChange:_,onFocus:a,onKeyDown:i,onKeyPress:u,onKeyUp:l})};A.defaultProps={hasError:!1,isDisabled:!1,isReadOnly:!1,shouldAutoFocus:!1,inputProps:{},onBlur:()=>Promise.resolve(),onChange:()=>Promise.resolve(),onChangeComplete:()=>Promise.resolve(),onFocus:()=>Promise.resolve(),onKeyDown:()=>Promise.resolve(),onKeyPress:()=>Promise.resolve(),onKeyUp:()=>Promise.resolve(),renderIncrementIcon:$,renderDecrementIcon:z};A.propTypes={contextCls:n.string,format:n.string,id:n.string,name:n.string,placeholder:n.string,max:n.number,min:n.number,precision:n.oneOfType([n.number,n.string]),step:n.number,value:n.number,hasError:n.bool,isDisabled:n.bool,isReadOnly:n.bool,shouldAutoFocus:n.bool,inputProps:n.object,messages:n.object,onBlur:n.func,onChange:n.func,onChangeComplete:n.func,onFocus:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,renderDecrementIcon:n.func,renderIncrementIcon:n.func};A.__docgenInfo={description:"",methods:[],displayName:"NumberPicker",props:{hasError:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isDisabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isReadOnly:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldAutoFocus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},inputProps:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},onBlur:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onChangeComplete:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onFocus:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onKeyDown:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onKeyPress:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onKeyUp:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},renderIncrementIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiChevronUp contextCls={\`\${baseCls}__increment-icon\`} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},renderDecrementIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiChevronDown contextCls={\`\${baseCls}__decrement-icon\`} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},contextCls:{description:"",type:{name:"string"},required:!1},format:{description:"",type:{name:"string"},required:!1},id:{description:"",type:{name:"string"},required:!1},name:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},max:{description:"",type:{name:"number"},required:!1},min:{description:"",type:{name:"number"},required:!1},precision:{description:"",type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1},step:{description:"",type:{name:"number"},required:!1},value:{description:"",type:{name:"number"},required:!1},messages:{description:"",type:{name:"object"},required:!1}}};export{A as N};
