import{j as Je}from"./jsx-runtime-DN5Rltsz.js";import{c as V,p as o,P as e}from"./localeUtils--UUmbdnw.js";import{r as a}from"./iframe-X-brMXKZ.js";import{c as Qe,u as ue,a as H,b as Xe,d as Ye,e as Ze,W as et,f as tt,S as ot,n as pe,g as nt}from"./extantPropsUtils-DAFKIOU6.js";import{I as st}from"./Button-B2Cdr0Hb.js";import{L as at,u as rt,a as lt,b as it,c as ut,F as pt,S as dt,B as ct}from"./SelectIcon-xcepUqDD.js";import{P as ft,u as mt}from"./useDropdownToggle-fDgQm5OK.js";import{I as yt}from"./InputAddon-Ca4srbUU.js";import{m as G,d as de,a as W}from"./PropTypes-4_mVf3cx.js";const bt=["id","className","containerClassName","placeholder","autoFocus","textField","dataKey","autoSelectMatches","focusFirstItem","value","defaultValue","onChange","open","defaultOpen","onToggle","filter","busy","disabled","readOnly","selectIcon","hideCaret","hideEmptyPopup","busySpinner","dropUp","tabIndex","popupTransition","name","onSelect","onKeyDown","onBlur","onFocus","inputProps","listProps","popupProps","groupBy","renderListItem","renderListGroup","optionComponent","listComponent","popupComponent","data","messages"];function C(){return C=Object.assign||function(r){for(var l=1;l<arguments.length;l++){var u=arguments[l];for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&(r[n]=u[n])}return r},C.apply(this,arguments)}function gt(r,l){if(r==null)return{};var u={},n=Object.keys(r),c,f;for(f=0;f<n.length;f++)c=n[f],!(l.indexOf(c)>=0)&&(u[c]=r[c]);return u}function ht(r,l,u){if(!l.trim())return-1;for(let n=0;n<r.length;n++)if(u(r[n]).toLowerCase()===l)return n;return-1}let vt={value:o.any,onChange:o.func,open:o.bool,onToggle:o.func,renderListItem:o.func,listComponent:o.elementType,renderListGroup:o.func,groupBy:W,data:o.array,dataKey:W,textField:W,name:o.string,hideEmptyPopup:o.bool,hideCaret:o.bool,onSelect:o.func,autoFocus:o.bool,disabled:de.acceptsArray,readOnly:de,busy:o.bool,selectIcon:o.node,busySpinner:o.node,dropUp:o.bool,popupTransition:o.elementType,placeholder:o.string,containerClassName:o.string,inputProps:o.object,listProps:o.object,messages:o.shape({openCombobox:G,emptyList:G,emptyFilter:G})};const $=a.forwardRef(function(l,u){let{id:n,className:c,containerClassName:f,placeholder:L,autoFocus:B,textField:b,dataKey:j,autoSelectMatches:R,focusFirstItem:K=!1,value:A,defaultValue:ce="",onChange:fe,open:me,defaultOpen:ye=!1,onToggle:be,filter:J=!0,busy:P,disabled:Q,readOnly:S,selectIcon:ge=Qe,hideCaret:q,hideEmptyPopup:he,busySpinner:X,dropUp:Y,tabIndex:ve,popupTransition:Ce,name:xe,onSelect:Ie,onKeyDown:Oe,onBlur:Pe,onFocus:Se,inputProps:y,listProps:qe,popupProps:Fe,groupBy:De,renderListItem:we,renderListGroup:Ee,optionComponent:Te,listComponent:Ve=at,popupComponent:Le=ft,data:F=[],messages:Be}=l,je=gt(l,bt),[x,Re]=ue(A,ce,fe);const[i,Ke]=ue(me,ye,be),D=a.useRef(null),N=a.useRef(null),Z=a.useRef(null),[Ae,I]=a.useState(null),w=a.useRef(!1),ee=H(n,"_input"),te=H(n,"_listbox"),oe=H(n,"_listbox_active_option"),d=rt(b,j),_=Xe(Be),m=mt(i,Ke),O=Q===!0,ne=!!S,g=lt(F,J,w.current?d.text(x):void 0,d.text),se=a.useMemo(()=>g[d.indexOf(g,x)],[g,x,d]),p=it({activeId:oe,scope:D,focusFirstItem:K,anchorItem:i?se:void 0}),[Ne,ae]=Ye(D,{disabled:O,onBlur:Pe,onFocus:Se},{didHandle(t){t?E({preventScroll:!0}):(w.current=!1,m.close(),I(null),p.focus(void 0))}});ut(D,oe,i,[p.getFocused()]);const _e=t=>{S||O||(t.preventDefault(),E(),m())},re=(t,s)=>{m.close(),w.current=!1,I(null),pe(Ie,[t,{originalEvent:s}]),le(t,s,!0),E({preventScroll:!0})},Ue=({key:t})=>{(t==="Backspace"||t==="Delete")&&p.focus(null)},Me=t=>{let s=R?ht(F,t.target.value.toLowerCase(),d.text):-1;w.current=!0,I(null);const h=s===-1?t.target.value:F[s];le(h,t),h?m.open():m.close()},ke=t=>{if(S)return;let{key:s,altKey:h,shiftKey:ie}=t;if(pe(Oe,[t]),t.defaultPrevented)return;const ze=v=>v!=null&&re(v,t),T=v=>{v&&(I(p.toDataItem(v)),p.focus(v))};if(s==="End"&&i&&!ie)t.preventDefault(),T(p.last());else if(s==="Home"&&i&&!ie)t.preventDefault(),T(p.first());else if(s==="Escape"&&i)t.preventDefault(),I(null),m.close();else if(s==="Enter"&&i)t.preventDefault(),ze(p.getFocused());else if(s==="ArrowDown")if(t.preventDefault(),i)T(p.next());else return m.open();else if(s==="ArrowUp"){if(t.preventDefault(),h)return m.close();i&&T(p.prev())}};function E(t){N.current&&N.current.focus(t)}function le(t,s,h=!1){Re(t,{lastValue:x,originalEvent:s,source:h?"listbox":"input"})}a.useImperativeHandle(u,()=>({focus:E}));let He=Ze(ae,i),U=d.findOrSelf(g,x),Ge=d.text(Ae||U),We=J?"list":"none",M=i&&(!he||!!g.length),$e=y?.readOnly!=null?y?.readOnly:S,k=!1;return q?P&&(k=a.createElement("span",{"aria-hidden":"true",className:"rw-btn rw-picker-caret"},X||ot)):k=a.createElement(yt,{busy:P,icon:ge,spinner:X,onClick:_e,disabled:!!O||ne,label:_.openCombobox()}),a.createElement(et,C({},je,{ref:D,open:i,dropUp:Y,focused:ae,disabled:O,readOnly:ne},Ne,{onKeyDown:ke,className:V(c,"rw-combobox")}),a.createElement(tt,{className:V(f,q&&"rw-widget-input",q&&!P&&"rw-hide-caret")},a.createElement(st,C({},y,{role:"combobox",name:xe,id:ee,className:V(y&&y.className,"rw-combobox-input",!q&&"rw-widget-input"),autoFocus:B,tabIndex:ve,disabled:O,readOnly:$e,"aria-busy":!!P,"aria-owns":te,"aria-autocomplete":We,"aria-expanded":i,"aria-haspopup":!0,placeholder:L,value:Ge,onChange:Me,onKeyDown:Ue,ref:N})),k),a.createElement(pt.Provider,{value:p.context},He&&a.createElement(Le,C({},Fe,{dropUp:Y,open:M,transition:Ce,onEntering:()=>Z.current.scrollIntoView()}),a.createElement(Ve,C({},qe,{id:te,tabIndex:-1,data:g,groupBy:De,disabled:Q,accessors:d,renderItem:we,renderGroup:Ee,optionComponent:Te,value:se,searchTerm:U&&d.text(U)||"","aria-hidden":!M,"aria-labelledby":ee,"aria-live":M?"polite":void 0,onChange:(t,s)=>re(t,s.originalEvent),ref:Z,messages:{emptyList:F.length?_.emptyFilter:_.emptyList}})))))});$.displayName="Combobox";$.propTypes=vt;const z=r=>{const{contextCls:l,hasError:u,onChange:n,onSelect:c,onToggle:f,renderBusySpinner:L,renderSelectIcon:B}=r,b="bankai-combobox",j=nt(r),R={[`${b}--error`]:u},K=L({baseCls:b}),A=B({baseCls:b});return Je.jsx($,{...j,className:V(b,R,l),busySpinner:K,selectIcon:A,onChange:n,onSelect:c,onToggle:f})};z.defaultProps={shouldAutoFocus:!1,shouldAutoSelectMatches:!1,hasError:!1,isBusy:!1,isDefaultOpen:!1,isDisabled:!1,isReadOnly:!1,shouldDropUp:!1,shouldFocustFirstItem:!1,data:[],onChange:()=>Promise.resolve(),onSelect:()=>Promise.resolve(),onToggle:()=>Promise.resolve(),renderBusySpinner:ct,renderSelectIcon:dt};z.propTypes={contextCls:e.string,id:e.string,name:e.string,placeholder:e.string,hasError:e.bool,isBusy:e.bool,isDefaultOpen:e.bool,isDisabled:e.bool,isOpen:e.bool,isReadOnly:e.bool,shouldAutoFocus:e.bool,shouldAutoSelectMatches:e.bool,shouldDropUp:e.bool,shouldFocustFirstItem:e.bool,shouldHideCaret:e.bool,shouldHideEmptyPopup:e.bool,data:e.array,disabledOptions:e.array,inputProps:e.object,listProps:e.object,messages:e.object,dataKey:e.oneOfType([e.string,e.func]),defaultValue:e.oneOfType([e.string,e.array,e.object]),filter:e.oneOfType([e.string,e.func,e.bool]),groupBy:e.oneOfType([e.string,e.func]),listComponent:e.oneOfType([e.element,e.func]),textField:e.oneOfType([e.string,e.func]),value:e.oneOfType([e.string,e.array,e.object]),onChange:e.func,onSelect:e.func,onToggle:e.func,renderBusySpinner:e.func,renderListGroup:e.func,renderListItem:e.func,renderSelectIcon:e.func};z.__docgenInfo={description:"",methods:[],displayName:"Combobox",props:{shouldAutoFocus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldAutoSelectMatches:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},hasError:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isBusy:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isDefaultOpen:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isDisabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isReadOnly:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldDropUp:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldFocustFirstItem:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},data:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onSelect:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onToggle:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},renderBusySpinner:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiSpinner contextCls={\`\${baseCls}__busy-icon\`} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},renderSelectIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiChevronDown contextCls={\`\${baseCls}__select-icon\`} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},contextCls:{description:"",type:{name:"string"},required:!1},id:{description:"",type:{name:"string"},required:!1},name:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},isOpen:{description:"",type:{name:"bool"},required:!1},shouldHideCaret:{description:"",type:{name:"bool"},required:!1},shouldHideEmptyPopup:{description:"",type:{name:"bool"},required:!1},disabledOptions:{description:"",type:{name:"array"},required:!1},inputProps:{description:"",type:{name:"object"},required:!1},listProps:{description:"",type:{name:"object"},required:!1},messages:{description:"",type:{name:"object"},required:!1},dataKey:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1},defaultValue:{description:"",type:{name:"union",value:[{name:"string"},{name:"array"},{name:"object"}]},required:!1},filter:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"},{name:"bool"}]},required:!1},groupBy:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1},listComponent:{description:"",type:{name:"union",value:[{name:"element"},{name:"func"}]},required:!1},textField:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1},value:{description:"",type:{name:"union",value:[{name:"string"},{name:"array"},{name:"object"}]},required:!1},renderListGroup:{description:"",type:{name:"func"},required:!1},renderListItem:{description:"",type:{name:"func"},required:!1}}};export{z as C};
