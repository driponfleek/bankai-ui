import{j as C}from"./jsx-runtime-DN5Rltsz.js";import{k as te,n as U,c as K,o as F,P as i,q as ae,s as le}from"./localeUtils--UUmbdnw.js";import{I as se}from"./IFLFormFieldComposer-DvcIa9Rx.js";import{R as u,r as p}from"./iframe-X-brMXKZ.js";import{d as B}from"./index-BtngOa46.js";import{T as ie}from"./TextInput-BZggGfZn.js";function P(){return(P=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o}).apply(this,arguments)}function O(o,e){if(o==null)return{};var n,r,t={},a=Object.keys(o);for(r=0;r<a.length;r++)e.indexOf(n=a[r])>=0||(t[n]=o[n]);return t}function I(o){var e=p.useRef(o),n=p.useRef(function(r){e.current&&e.current(r)});return e.current=o,n.current}var _=function(o,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),o>n?n:o<e?e:o},E=function(o){return"touches"in o},M=function(o){return o&&o.ownerDocument.defaultView||self},z=function(o,e,n){var r=o.getBoundingClientRect(),t=E(e)?function(a,s){for(var l=0;l<a.length;l++)if(a[l].identifier===s)return a[l];return a[0]}(e.touches,n):e;return{left:_((t.pageX-(r.left+M(o).pageXOffset))/r.width),top:_((t.pageY-(r.top+M(o).pageYOffset))/r.height)}},L=function(o){!E(o)&&o.preventDefault()},H=u.memo(function(o){var e=o.onMove,n=o.onKey,r=O(o,["onMove","onKey"]),t=p.useRef(null),a=I(e),s=I(n),l=p.useRef(null),d=p.useRef(!1),c=p.useMemo(function(){var y=function(g){L(g),(E(g)?g.touches.length>0:g.buttons>0)&&t.current?a(z(t.current,g,l.current)):w(!1)},oe=function(){return w(!1)};function w(g){var f=d.current,k=M(t.current),x=g?k.addEventListener:k.removeEventListener;x(f?"touchmove":"mousemove",y),x(f?"touchend":"mouseup",oe)}return[function(g){var f=g.nativeEvent,k=t.current;if(k&&(L(f),!function(ne,re){return re&&!E(ne)}(f,d.current)&&k)){if(E(f)){d.current=!0;var x=f.changedTouches||[];x.length&&(l.current=x[0].identifier)}k.focus(),a(z(k,f,l.current)),w(!0)}},function(g){var f=g.which||g.keyCode;f<37||f>40||(g.preventDefault(),s({left:f===39?.05:f===37?-.05:0,top:f===40?.05:f===38?-.05:0}))},w]},[s,a]),m=c[0],v=c[1],b=c[2];return p.useEffect(function(){return b},[b]),u.createElement("div",P({},r,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:t,onKeyDown:v,tabIndex:0,role:"slider"}))}),T=function(o){return o.filter(Boolean).join(" ")},A=function(o){var e=o.color,n=o.left,r=o.top,t=r===void 0?.5:r,a=T(["react-colorful__pointer",o.className]);return u.createElement("div",{className:a,style:{top:100*t+"%",left:100*n+"%"}},u.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},h=function(o,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*o)/n},Y=function(o){var e=o.s,n=o.v,r=o.a,t=(200-e)*n/100;return{h:h(o.h),s:h(t>0&&t<200?e*n/100/(t<=100?t:200-t)*100:0),l:h(t/2),a:h(r,2)}},V=function(o){var e=Y(o);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},R=function(o){var e=Y(o);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},G=function(o){var e=o.h,n=o.s,r=o.v,t=o.a;e=e/360*6,n/=100,r/=100;var a=Math.floor(e),s=r*(1-n),l=r*(1-(e-a)*n),d=r*(1-(1-e+a)*n),c=a%6;return{r:h(255*[r,l,s,s,d,r][c]),g:h(255*[d,r,r,l,s,s][c]),b:h(255*[s,s,d,r,r,l][c]),a:h(t,2)}},X=function(o){var e=o.r,n=o.g,r=o.b,t=o.a,a=Math.max(e,n,r),s=a-Math.min(e,n,r),l=s?a===e?(n-r)/s:a===n?2+(r-e)/s:4+(e-n)/s:0;return{h:h(60*(l<0?l+6:l)),s:h(a?s/a*100:0),v:h(a/255*100),a:t}},J=u.memo(function(o){var e=o.hue,n=o.onChange,r=T(["react-colorful__hue",o.className]);return u.createElement("div",{className:r},u.createElement(H,{onMove:function(t){n({h:360*t.left})},onKey:function(t){n({h:_(e+360*t.left,0,360)})},"aria-label":"Hue","aria-valuenow":h(e),"aria-valuemax":"360","aria-valuemin":"0"},u.createElement(A,{className:"react-colorful__hue-pointer",left:e/360,color:V({h:e,s:100,v:100,a:1})})))}),Q=u.memo(function(o){var e=o.hsva,n=o.onChange,r={backgroundColor:V({h:e.h,s:100,v:100,a:1})};return u.createElement("div",{className:"react-colorful__saturation",style:r},u.createElement(H,{onMove:function(t){n({s:100*t.left,v:100-100*t.top})},onKey:function(t){n({s:_(e.s+100*t.left,0,100),v:_(e.v-100*t.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+h(e.s)+"%, Brightness "+h(e.v)+"%"},u.createElement(A,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:V(e)})))}),D=function(o,e){if(o===e)return!0;for(var n in o)if(o[n]!==e[n])return!1;return!0};function W(o,e,n){var r=I(n),t=p.useState(function(){return o.toHsva(e)}),a=t[0],s=t[1],l=p.useRef({color:e,hsva:a});p.useEffect(function(){if(!o.equal(e,l.current.color)){var c=o.toHsva(e);l.current={hsva:c,color:e},s(c)}},[e,o]),p.useEffect(function(){var c;D(a,l.current.hsva)||o.equal(c=o.fromHsva(a),l.current.color)||(l.current={hsva:a,color:c},r(c))},[a,o,r]);var d=p.useCallback(function(c){s(function(m){return Object.assign({},m,c)})},[]);return[a,d]}var ce=typeof window<"u"?p.useLayoutEffect:p.useEffect,ue=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},$=new Map,Z=function(o){ce(function(){var e=o.current?o.current.ownerDocument:document;if(e!==void 0&&!$.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,$.set(e,n);var r=ue();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},de=function(o){var e=o.className,n=o.colorModel,r=o.color,t=r===void 0?n.defaultColor:r,a=o.onChange,s=O(o,["className","colorModel","color","onChange"]),l=p.useRef(null);Z(l);var d=W(n,t,a),c=d[0],m=d[1],v=T(["react-colorful",e]);return u.createElement("div",P({},s,{ref:l,className:v}),u.createElement(Q,{hsva:c,onChange:m}),u.createElement(J,{hue:c.h,onChange:m,className:"react-colorful__last-control"}))},pe=function(o){var e=o.className,n=o.hsva,r=o.onChange,t={backgroundImage:"linear-gradient(90deg, "+R(Object.assign({},n,{a:0}))+", "+R(Object.assign({},n,{a:1}))+")"},a=T(["react-colorful__alpha",e]),s=h(100*n.a);return u.createElement("div",{className:a},u.createElement("div",{className:"react-colorful__alpha-gradient",style:t}),u.createElement(H,{onMove:function(l){r({a:l.left})},onKey:function(l){r({a:_(n.a+l.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},u.createElement(A,{className:"react-colorful__alpha-pointer",left:n.a,color:R(n)})))},fe=function(o){var e=o.className,n=o.colorModel,r=o.color,t=r===void 0?n.defaultColor:r,a=o.onChange,s=O(o,["className","colorModel","color","onChange"]),l=p.useRef(null);Z(l);var d=W(n,t,a),c=d[0],m=d[1],v=T(["react-colorful",e]);return u.createElement("div",P({},s,{ref:l,className:v}),u.createElement(Q,{hsva:c,onChange:m}),u.createElement(J,{hue:c.h,onChange:m}),u.createElement(pe,{hsva:c,onChange:m,className:"react-colorful__last-control"}))},he={defaultColor:{r:0,g:0,b:0,a:1},toHsva:X,fromHsva:G,equal:D},me=function(o){return u.createElement(fe,P({},o,{colorModel:he}))},ge={defaultColor:{r:0,g:0,b:0},toHsva:function(o){return X({r:o.r,g:o.g,b:o.b,a:1})},fromHsva:function(o){return{r:(e=G(o)).r,g:e.g,b:e.b};var e},equal:D},Ce=function(o){return u.createElement(de,P({},o,{colorModel:ge}))};const ve=(o,e)=>{const{hasError:n,isDisabled:r,isReadOnly:t,shouldAlignPickerToRightEdge:a,shouldOpenUp:s}=o??{};return{[`${e}--disabled`]:r,[`${e}--has-error`]:n,[`${e}--read-only`]:t,[`${e}--should-align-picker-to-right-edge`]:a,[`${e}--should-open-up`]:s}},be=o=>{const{color:e,contextCls:n,changeCompleteThreshold:r,hasAlpha:t,hasError:a,shouldAlignPickerToRightEdge:s,shouldOpenUp:l,triggerProps:d,onChange:c,onChangeComplete:m,renderColorPicker:v,renderTriggerContent:b,...y}=o??{};return{...y,...a&&{"aria-invalid":!0},maxLength:t?9:7}},ke=o=>{const{color:e,changeCompleteThreshold:n,hasAlpha:r,onChange:t,onChangeComplete:a}=o??{};return{color:e,changeCompleteThreshold:n,hasAlpha:r,onChange:t,onChangeComplete:a}},ye=o=>{const{isDisabled:e=!1,isReadOnly:n=!1,triggerProps:r,onClick:t}=o??{};return{...!n&&{...r,disabled:e,type:"button",onClick:t}}},_e=(o,e)=>{document.addEventListener("keydown",o),document.addEventListener("mouseup",e)},Pe=(o,e)=>{document.removeEventListener("keydown",o),document.removeEventListener("mouseup",e)},xe=o=>{const e=te(o);return U(e)},q=o=>{const{contextCls:e,changeCompleteThreshold:n,color:r,hasAlpha:t,onChange:a,onChangeComplete:s}=o,l="bankai-color-picker",d=t?me:Ce,c=xe(r),m=b=>B(()=>{s(b)},n),v=b=>{const y=t?U(b,!0):F(b);a(y),m(y)};return C.jsx(d,{className:K(l,e),color:c,onChange:v})};q.defaultProps={changeCompleteThreshold:200,hasAlpha:!1,onChange:()=>Promise.resolve(),onChangeComplete:()=>Promise.resolve()};q.propTypes={color:i.string,contextCls:i.string,changeCompleteThreshold:i.number,hasAlpha:i.bool,onChange:i.func,onChangeComplete:i.func};q.__docgenInfo={description:"",methods:[],displayName:"ColorPicker",props:{changeCompleteThreshold:{defaultValue:{value:"200",computed:!1},description:"",type:{name:"number"},required:!1},hasAlpha:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onChangeComplete:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},color:{description:"",type:{name:"string"},required:!1},contextCls:{description:"",type:{name:"string"},required:!1}}};const j=o=>{const{color:e,baseCls:n}=o,t={backgroundColor:ae(e)?e:"transparent"};return C.jsx("span",{className:`${n}__trigger-swatch`,style:t})};j.propTypes={baseCls:i.string,color:i.string};j.__docgenInfo={description:"",methods:[],displayName:"ColorPickerInputTriggerContent",props:{baseCls:{description:"",type:{name:"string"},required:!1},color:{description:"",type:{name:"string"},required:!1}}};const N=o=>{const{baseCls:e,isReadOnly:n,renderTriggerContent:r}=o,t=ye(o),a=n?"span":"button";return C.jsx(a,{...t,className:`${e}__trigger`,children:r(o)})};N.defaultProps={isDisabled:!1,isReadOnly:!1,onClick:()=>Promise.resolve(),renderTriggerContent:j};N.propTypes={baseCls:i.string,isDisabled:i.bool,isReadOnly:i.bool,triggerProps:i.shape({"aria-label":i.string}),onClick:i.func,renderTriggerContent:i.func};N.__docgenInfo={description:"",methods:[],displayName:"ColorPickerInputTrigger",props:{isDisabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isReadOnly:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClick:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},renderTriggerContent:{defaultValue:{value:`(props) => {
    const { color, baseCls } = props;
    const isValid = isValidHexColor(color);
    const style = {
        backgroundColor: !isValid ? 'transparent' : color,
    };

    return <span className={\`\${baseCls}__trigger-swatch\`} style={style} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},baseCls:{description:"",type:{name:"string"},required:!1},triggerProps:{description:"",type:{name:"shape",value:{"aria-label":{name:"string",required:!1}}},required:!1}}};class ee extends p.Component{static defaultProps={changeCompleteThreshold:200,hasAlpha:!1,hasError:!1,isDisabled:!1,isReadOnly:!1,shouldAlignPickerToRightEdge:!1,shouldOpenUp:!1,triggerProps:{},onChange:()=>Promise.resolve(),onChangeComplete:()=>Promise.resolve(),renderColorPicker:q};static propTypes={color:i.string,contextCls:i.string,changeCompleteThreshold:i.number,hasAlpha:i.bool,hasError:i.bool,isDisabled:i.bool,isReadOnly:i.bool,shouldAlignPickerToRightEdge:i.bool,shouldOpenUp:i.bool,triggerProps:i.shape({"aria-label":i.string}),onChange:i.func,onChangeComplete:i.func,renderColorPicker:i.func,renderTriggerContent:i.func};state={shouldShowPicker:!1};render(){const{contextCls:e,color:n,isDisabled:r,renderColorPicker:t,renderTriggerContent:a}=this.props,{shouldShowPicker:s}=this.state,l=ve(this.props),d=be(this.props),c={...ke(this.props),onChangeComplete:this.handlePickerChange};return C.jsxs("div",{ref:this.handleSetRef,className:K(this.baseCls,l,e),children:[C.jsx("div",{className:`${this.baseCls}__input-container`,children:C.jsx(ie,{...d,value:n,contextCls:`${this.baseCls}__input`,onChange:this.handleInputChange})}),C.jsx("div",{className:`${this.baseCls}__trigger-container`,children:C.jsx(N,{...this.props,baseCls:this.baseCls,renderTriggerContent:a,onClick:this.handleTriggerClick})}),C.jsx("div",{className:`${this.baseCls}__picker-container`,children:s&&!r&&t(c)})]})}componentDidMount(){_e(this.handleKeyDown,this.handleMouseUp)}componentWillUnmount(){Pe(this.handleKeyDown,this.handleMouseUp)}handleSetRef=e=>{e&&(this.containerRef=e)};handleTriggerClick=()=>{const{shouldShowPicker:e}=this.state;this.setState({shouldShowPicker:!e})};handlePickerChange=e=>{const{hasAlpha:n}=this.props;this.handleChange(n?F(e):e)};handleInputChange=e=>{this.handleChange(e?.target?.value)};handleChange=e=>{const{onChange:n}=this.props,r=le(e);n(r),this.handleChangeComplete(r)};handleChangeComplete=B(e=>{const{onChangeComplete:n}=this.props;n(e)},this.props.changeCompleteThreshold);handleKeyDown=e=>{const{shouldShowPicker:n}=this.state;n&&(e.key==="Escape"||e.key==="Esc"||e.keyCode===27)&&this.closeColorPicker()};handleMouseUp=e=>{const{shouldShowPicker:n}=this.state,r=e.srcElement||e.target;n&&!(this.containerRef&&this.containerRef.contains(r))&&this.closeColorPicker()};closeColorPicker=()=>{this.setState({shouldShowPicker:!1})};baseCls="bankai-color-picker-input"}ee.__docgenInfo={description:"",methods:[{name:"handleSetRef",docblock:null,modifiers:[],params:[{name:"el",optional:!1,type:null}],returns:null},{name:"handleTriggerClick",docblock:null,modifiers:[],params:[],returns:null},{name:"handlePickerChange",docblock:null,modifiers:[],params:[{name:"color",optional:!1,type:null}],returns:null},{name:"handleInputChange",docblock:null,modifiers:[],params:[{name:"evt",optional:!1,type:null}],returns:null},{name:"handleChange",docblock:null,modifiers:[],params:[{name:"color",optional:!1,type:null}],returns:null},{name:"handleKeyDown",docblock:null,modifiers:[],params:[{name:"evt",optional:!1,type:null}],returns:null},{name:"handleMouseUp",docblock:null,modifiers:[],params:[{name:"evt",optional:!1,type:null}],returns:null},{name:"closeColorPicker",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ColorPickerInput",props:{changeCompleteThreshold:{defaultValue:{value:"200",computed:!1},description:"",type:{name:"number"},required:!1},hasAlpha:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},hasError:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isDisabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isReadOnly:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldAlignPickerToRightEdge:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldOpenUp:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},triggerProps:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{"aria-label":{name:"string",required:!1}}},required:!1},onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onChangeComplete:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},renderColorPicker:{defaultValue:{value:`(props) => {
    const {
        contextCls,
        changeCompleteThreshold,
        color,
        hasAlpha,
        onChange,
        onChangeComplete,
    } = props;
    const baseCls = 'bankai-color-picker';
    const Picker = hasAlpha ? RgbaColorPicker : RgbColorPicker;
    const sanatizedColor = getColorPickerSanatizedColor(color);
    // Handle Change Complete
    const handleChangeComplete = (newColor) =>
        debounce(() => {
            onChangeComplete(newColor);
        }, changeCompleteThreshold);
    // Handle Change
    const handleChange = (returnedColor) => {
        const newColor = hasAlpha
            ? convertColorToRGB(returnedColor, true)
            : convertColorToHex(returnedColor);

        onChange(newColor);
        handleChangeComplete(newColor);
    };

    return (
        <Picker
            className={cx(baseCls, contextCls)}
            color={sanatizedColor}
            onChange={handleChange}
        />
    );
}`,computed:!1},description:"",type:{name:"func"},required:!1},color:{description:"",type:{name:"string"},required:!1},contextCls:{description:"",type:{name:"string"},required:!1},renderTriggerContent:{description:"",type:{name:"func"},required:!1}}};const Ee=se(ee),S=o=>{const{onChange:e,fieldId:n,...r}=o,t=a=>{const s=(a??"").toLowerCase();e(s,n)};return C.jsx(Ee,{...r,onChange:t})};S.defaultProps={onChange:()=>Promise.resolve()};S.propTypes={fieldId:i.string,onChange:i.func};S.__docgenInfo={description:"",methods:[],displayName:"ColorPickerField",props:{onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},fieldId:{description:"",type:{name:"string"},required:!1}}};export{S as C};
