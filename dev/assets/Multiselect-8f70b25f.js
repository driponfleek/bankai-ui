import{c as M,j as Pe}from"./localeUtils-28c44f90.js";import{P as e}from"./index-f9722e9b.js";import{r as Ct,u as ae,a as V,b as vt,d as Tt,e as Ot,W as It,f as wt,t as St,n as se,s as Pt}from"./extantPropsUtils-1085994c.js";import{R as p,r as C}from"./index-c013ead5.js";import{c as xt,D as Dt,A as qt,C as Et}from"./PickerCaret-5f38e068.js";import{f as Ft,u as Vt,b as Oe,s as Ie,F as we,a as Lt,d as _t,B as Rt,S as Bt}from"./SelectIcon-2428f4e7.js";import{d as j,a as re,m as P}from"./PropTypes-94435e28.js";import{P as Nt,u as kt}from"./useDropdownToggle-951036aa.js";import{B as Mt}from"./BankaiX-e64987f1.js";function jt(s,n,r){s.closest&&!r&&s.closest(n);var a=s;do{if(Ct(a,n))return a;a=a.parentElement}while(a&&a!==r&&a.nodeType===document.ELEMENT_NODE);return null}const At=["disabled","readOnly"];function le(){return le=Object.assign||function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},le.apply(this,arguments)}function Kt(s,n){if(s==null)return{};var r={},a=Object.keys(s),o,i;for(i=0;i<a.length;i++)o=a[i],!(n.indexOf(o)>=0)&&(r[o]=s[o]);return r}const Wt={value:e.string,placeholder:e.string,maxLength:e.number,onChange:e.func.isRequired,disabled:j,readOnly:j},ie=p.forwardRef((s,n)=>{let{disabled:r,readOnly:a}=s,o=Kt(s,At),i=Math.max(String(o.value||o.placeholder||"").length,1)+1;return p.createElement("input",le({spellCheck:"false",autoCapitalize:"off"},o,{size:i,ref:n,autoComplete:"off",className:"rw-multiselect-input","aria-disabled":r,"aria-readonly":a,disabled:r,readOnly:a}))});ie.displayName="MultiselectInput";ie.propTypes=Wt;function $t({className:s,children:n,style:r,label:a,disabled:o,readOnly:i,onRemove:d,clearTagIcon:h,dataItem:v}){const[T,m,y]=Ft(v),O=x=>{o||d(v,x)};return p.createElement("div",{ref:T,role:"option",id:y,"data-rw-option":"","data-rw-focusable":o?void 0:"","data-rw-focused":m?"":void 0,className:M(s,"rw-multiselect-tag",o&&"rw-state-disabled",m&&!o&&"rw-state-focus"),style:r},p.createElement("span",{className:"rw-multiselect-tag-label"},n),p.createElement("button",{type:"button",tabIndex:-1,onClick:O,onTouchEnd:O,disabled:o||i,className:"rw-multiselect-tag-btn","aria-label":a||"Remove item"},h))}function Ut({id:s,value:n,textAccessor:r,label:a,disabled:o,readOnly:i,onDelete:d,children:h,clearTagIcon:v,renderTagValue:T,tagOptionComponent:m=$t}){return p.createElement("div",{id:s,role:"listbox","aria-label":a,"aria-multiselectable":"true","aria-orientation":"horizontal",className:"rw-multiselect-taglist"},n.map((y,O)=>{const x=Array.isArray(o)?o.includes(y):!!o;return p.createElement(m,{key:O,dataItem:y,onRemove:d,clearTagIcon:v,disabled:x,readOnly:i},T?T({item:y}):r(y))}),h)}const Gt=["dataKey","textField","autoFocus","id","value","defaultValue","onChange","open","defaultOpen","onToggle","focusFirstItem","searchTerm","defaultSearchTerm","onSearch","filter","allowCreate","className","containerClassName","placeholder","busy","disabled","readOnly","selectIcon","clearTagIcon","busySpinner","dropUp","tabIndex","popupTransition","showPlaceholderWithValues","showSelectedItemsInList","onSelect","onCreate","onKeyDown","onBlur","onFocus","inputProps","listProps","popupProps","renderListItem","renderListGroup","renderTagValue","optionComponent","tagOptionComponent","groupBy","listComponent","popupComponent","tagListComponent","data","messages"];function L(){return L=Object.assign||function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},L.apply(this,arguments)}function zt(s,n){if(s==null)return{};var r={},a=Object.keys(s),o,i;for(i=0;i<a.length;i++)o=a[i],!(n.indexOf(o)>=0)&&(r[o]=s[o]);return r}const Ht=13,Se="insert",oe="remove";let Xt={data:e.array,value:e.array,onChange:e.func,searchTerm:e.string,onSearch:e.func,open:e.bool,handleOpen:e.func,dataKey:re,textField:re,renderTagValue:e.func,renderListItem:e.func,renderListGroup:e.func,groupBy:re,allowCreate:e.oneOf([!0,!1,"onFilter"]),onSelect:e.func,onCreate:e.func,busy:e.bool,selectIcon:e.node,clearTagIcon:e.node,busySpinner:e.node,dropUp:e.bool,popupTransition:e.elementType,containerClassName:e.string,inputProps:e.object,listProps:e.object,autoFocus:e.bool,placeholder:e.string,showPlaceholderWithValues:e.bool,showSelectedItemsInList:e.bool,disabled:j.acceptsArray,readOnly:j,messages:e.shape({open:P,emptyList:P,emptyFilter:P,createOption:P,tagsLabel:P,selectedItems:P,noneSelected:P,removeLabel:P})};const Yt=[];function Jt(s=Yt,n,r,a,o,i){return n=C.useMemo(()=>i?n:n.filter(d=>!s.some(h=>r.matches(d,h))),[n,i,s,r]),[Lt(n,a||!1,o,r.text),n.length]}const ue=p.forwardRef(function(n,r){let{dataKey:a,textField:o,autoFocus:i,id:d,value:h,defaultValue:v=[],onChange:T,open:m,defaultOpen:y=!1,onToggle:O,focusFirstItem:x=!1,searchTerm:K,defaultSearchTerm:W="",onSearch:xe,filter:De="startsWith",allowCreate:qe=!1,className:Ee,containerClassName:Fe,placeholder:Ve,busy:pe,disabled:$,readOnly:B,selectIcon:Le,clearTagIcon:_e=St,busySpinner:Re,dropUp:de,tabIndex:Be,popupTransition:Ne,showPlaceholderWithValues:ke=!1,showSelectedItemsInList:fe=!1,onSelect:Me,onCreate:je,onKeyDown:Ae,onBlur:Ke,onFocus:We,inputProps:$e,listProps:Ue,popupProps:Ge,renderListItem:ze,renderListGroup:He,renderTagValue:Xe,optionComponent:Ye,tagOptionComponent:Je,groupBy:Qe,listComponent:Ze=_t,popupComponent:et=Nt,tagListComponent:tt=Ut,data:U=[],messages:nt}=n,at=zt(n,Gt),[_,st]=ae(h,v,T);const[u,rt]=ae(m,y,O),[g,ot]=ae(K,W,xe),N=C.useRef(null),I=C.useRef(null),me=C.useRef(null),lt=V(d,"_input"),ye=V(d,"_taglist"),G=V(d,"_listbox"),it=V(d,"_createlist_option"),z=V(d,"_taglist_active_tag"),H=V(d,"_listbox_active_option"),q=Vt(o,a),k=vt(nt),w=kt(u,rt),E=$===!0,X=!!B,[ut,Y]=Tt(N,{disabled:E,onBlur:Ke,onFocus:We},{didHandle(t,l){if(t)return D();w.close(),te(l),c.focus(null)}}),b=C.useMemo(()=>_.map(t=>q.findOrSelf(U,t)),[U,_,q]),[ge,ct]=Jt(b,U,q,u?De:!1,g,fe),f=Oe({scope:N,scopeSelector:".rw-popup",focusFirstItem:x,activeId:H,anchorItem:u?b[b.length-1]:void 0}),c=Oe({scope:N,scopeSelector:".rw-multiselect-taglist",activeId:z}),J=xt(qe,{searchTerm:g,data:ge,dataItems:b,accessors:q}),he=c.getFocused();C.useEffect(()=>{u||Ie(I.current,he?z:"")},[z,u,he]);const be=f.getFocused();C.useEffect(()=>{u&&Ie(I.current,be?H:"")},[H,u,be]);const Q=(t,l)=>{E||B||c.size()===0||(D(),ee(t,l,oe))},R=C.useRef(!1),pt=t=>{t.key==="Backspace"&&t.currentTarget.value&&!R.current&&(R.current=!0)},dt=t=>{t.key==="Backspace"&&R.current&&(R.current=!1)},ft=t=>{Te(t.target.value,t,"input"),w.open()},Ce=t=>{E||B||(t.preventDefault(),D(),jt(t.target,".rw-select")&&u?w.close():w.open())},mt=()=>{E||!I.current||(D(),I.current&&I.current.select())},ve=(t,l)=>{if(t!==void 0){if(l.preventDefault(),t===Et){Z(l);return}se(Me,[t,{originalEvent:l}]),!fe||!b.includes(t)?ee(t,l,Se):ee(t,l,oe),D()}},Z=t=>{se(je,[g]),te(t),D()},yt=t=>{if(B){t.preventDefault();return}let{key:l,keyCode:F,altKey:S,ctrlKey:ne}=t;if(se(Ae,[t]),!t.defaultPrevented)if(l==="ArrowDown"){if(t.preventDefault(),!u){w.open();return}f.focus(f.next()),c.focus(null)}else if(l==="ArrowUp"&&(u||S)){if(t.preventDefault(),S){w.close();return}f.focus(f.prev()),c.focus(null)}else if(l==="End")t.preventDefault(),u?(f.focus(f.last()),c.focus(null)):(c.focus(c.last()),f.focus(null));else if(l==="Home")t.preventDefault(),u?f.focus(f.first()):f.focus(c.first());else if(u&&F===Ht){if(t.preventDefault(),ne&&J)return Z(t);ve(f.getFocused(),t)}else l==="Escape"?u?w.close():c.focus(null):!g&&!R.current&&(l==="ArrowLeft"?c.focus(c.prev({behavior:"loop"})):l==="ArrowRight"?c.focus(c.next({behavior:"loop"})):l==="Delete"&&c.getFocused()?Q(c.getFocused(),t):l==="Backspace"?Q(c.toDataItem(c.last()),t):l===" "&&!u&&(t.preventDefault(),w.open()))};function ee(t,l,F){let S=b;switch(F){case Se:S=S.concat(t);break;case oe:S=S.filter(ne=>ne!==t);break}st(S,{action:F,dataItem:t,originalEvent:l,searchTerm:g,lastValue:_}),te(l)}function te(t){Te("",t,"clear")}function Te(t,l,F="input"){t!==g&&ot(t,{action:F,originalEvent:l,lastSearchTerm:g})}function D(){I.current&&I.current.focus()}C.useImperativeHandle(r,()=>({focus:D}));let gt=Ot(Y,u),ht=!!b.length,bt=`${G} `+(ht?ye:"")+(J?it:"");return p.createElement(It,L({},at,{ref:N,open:u,dropUp:de,focused:Y,disabled:E,readOnly:X,onKeyDown:yt},ut,{className:M(Ee,"rw-multiselect")}),p.createElement(wt,{onClick:Ce,onTouchEnd:Ce,onDoubleClick:mt,className:M(Fe,"rw-widget-input")},p.createElement(we.Provider,{value:c.context},p.createElement(tt,{id:ye,textAccessor:q.text,clearTagIcon:_e,label:k.tagsLabel(),value:b,readOnly:X,disabled:$,onDelete:Q,tagOptionComponent:Je,renderTagValue:Xe},p.createElement(ie,L({},$e,{role:"combobox",autoFocus:i,tabIndex:Be||0,"aria-expanded":!!u,"aria-busy":!!pe,"aria-owns":bt,"aria-controls":G,"aria-haspopup":"listbox","aria-autocomplete":"list",value:g,disabled:E,readOnly:X,placeholder:(_.length&&!ke?"":Ve)||"",onKeyDown:pt,onKeyUp:dt,onChange:ft,ref:I})))),p.createElement(Dt,{busy:pe,spinner:Re,icon:Le,visible:Y})),p.createElement(we.Provider,{value:f.context},gt&&p.createElement(et,L({},Ge,{dropUp:de,open:u,transition:Ne,onEntering:()=>me.current.scrollIntoView()}),p.createElement(Ze,L({},Ue,{id:G,data:ge,tabIndex:-1,disabled:$,searchTerm:g,accessors:q,renderItem:ze,renderGroup:He,value:b,groupBy:Qe,optionComponent:Ye,onChange:(t,l)=>ve(t,l.originalEvent),"aria-live":"polite","aria-labelledby":lt,"aria-hidden":!u,ref:me,messages:{emptyList:ct?k.emptyFilter:k.emptyList}})),J&&p.createElement(qt,{onSelect:Z},k.createOption(_,g)))))});ue.displayName="Multiselect";ue.propTypes=Xt;const ce=s=>{const{baseCls:n}=s;return Pe(Mt,{contextCls:`${n}__clear-tag-icon`})};ce.propTypes={baseCls:e.string};const Qt=ce;ce.__docgenInfo={description:"",methods:[],displayName:"ClearTagIcon",props:{baseCls:{type:{name:"string"},required:!1,description:""}}};const A=s=>{const{contextCls:n,hasError:r,onChange:a,onCreate:o,onSearch:i,onSelect:d,renderBusySpinner:h,renderClearTagIcon:v,renderSelectIcon:T}=s,m="bankai-multiselect",y=Pt(s),O={[`${m}--error`]:r},x=h({baseCls:m}),K=T({baseCls:m}),W=v({baseCls:m});return Pe(ue,{...y,className:M(m,O,n),onChange:a,onCreate:o,onSearch:i,onSelect:d,busySpinner:x,selectIcon:K,clearTagIcon:W})};A.defaultProps={hasError:!1,isBusy:!1,isDefaultOpen:!1,isDisabled:!1,isReadOnly:!1,shouldAutoFocus:!1,shouldDropUp:!1,shouldFocustFirstItem:!1,shouldShowPlaceholderWithValues:!0,data:[],onChange:()=>Promise.resolve(),onCreate:()=>Promise.resolve(),onSearch:()=>Promise.resolve(),onSelect:()=>Promise.resolve(),renderBusySpinner:Rt,renderClearTagIcon:Qt,renderSelectIcon:Bt};A.propTypes={contextCls:e.string,defaultSearchTerm:e.string,id:e.string,placeholder:e.string,searchTerm:e.string,hasError:e.bool,isBusy:e.bool,isDefaultOpen:e.bool,isDisabled:e.bool,isOpen:e.bool,isReadOnly:e.bool,shouldAutoFocus:e.bool,shouldDropUp:e.bool,shouldFocustFirstItem:e.bool,shouldShowPlaceholderWithValues:e.bool,data:e.array,defaultValue:e.array,value:e.array,inputProps:e.object,listProps:e.object,messages:e.object,allowCreate:e.oneOfType([e.string,e.bool]),dataKey:e.oneOfType([e.string,e.func]),filter:e.oneOfType([e.string,e.func,e.bool]),groupBy:e.oneOfType([e.string,e.func]),listComponent:e.oneOfType([e.element,e.func]),tagOptionComponent:e.oneOfType([e.element,e.func]),textField:e.oneOfType([e.string,e.func]),onChange:e.func,onCreate:e.func,onSearch:e.func,onSelect:e.func,renderBusySpinner:e.func,renderClearTagIcon:e.func,renderListGroup:e.func,renderListItem:e.func,renderSelectIcon:e.func,renderTagValue:e.func};const un=A;A.__docgenInfo={description:"",methods:[],displayName:"Multiselect",props:{hasError:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isBusy:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isDefaultOpen:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isDisabled:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},isReadOnly:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},shouldAutoFocus:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},shouldDropUp:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},shouldFocustFirstItem:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},shouldShowPlaceholderWithValues:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},data:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onCreate:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onSearch:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},onSelect:{defaultValue:{value:"() => Promise.resolve()",computed:!1},type:{name:"func"},required:!1,description:""},renderBusySpinner:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiSpinner contextCls={\`\${baseCls}__busy-icon\`} />;
}`,computed:!1},type:{name:"func"},required:!1,description:""},renderClearTagIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiX contextCls={\`\${baseCls}__clear-tag-icon\`} />;
}`,computed:!1},type:{name:"func"},required:!1,description:""},renderSelectIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiChevronDown contextCls={\`\${baseCls}__select-icon\`} />;
}`,computed:!1},type:{name:"func"},required:!1,description:""},contextCls:{type:{name:"string"},required:!1,description:""},defaultSearchTerm:{type:{name:"string"},required:!1,description:""},id:{type:{name:"string"},required:!1,description:""},placeholder:{type:{name:"string"},required:!1,description:""},searchTerm:{type:{name:"string"},required:!1,description:""},isOpen:{type:{name:"bool"},required:!1,description:""},defaultValue:{type:{name:"array"},required:!1,description:""},value:{type:{name:"array"},required:!1,description:""},inputProps:{type:{name:"object"},required:!1,description:""},listProps:{type:{name:"object"},required:!1,description:""},messages:{type:{name:"object"},required:!1,description:""},allowCreate:{type:{name:"union",value:[{name:"string"},{name:"bool"}]},required:!1,description:""},dataKey:{type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1,description:""},filter:{type:{name:"union",value:[{name:"string"},{name:"func"},{name:"bool"}]},required:!1,description:""},groupBy:{type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1,description:""},listComponent:{type:{name:"union",value:[{name:"element"},{name:"func"}]},required:!1,description:""},tagOptionComponent:{type:{name:"union",value:[{name:"element"},{name:"func"}]},required:!1,description:""},textField:{type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1,description:""},renderListGroup:{type:{name:"func"},required:!1,description:""},renderListItem:{type:{name:"func"},required:!1,description:""},renderTagValue:{type:{name:"func"},required:!1,description:""}}};export{un as M};
//# sourceMappingURL=Multiselect-8f70b25f.js.map
