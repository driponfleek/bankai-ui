import{j as mt}from"./jsx-runtime-DN5Rltsz.js";import{c as X,P as e}from"./localeUtils--UUmbdnw.js";import{r as f,R as u}from"./iframe-X-brMXKZ.js";import{i as yt,c as gt,u as re,a as ae,d as ht,e as bt,W as Ct,f as vt,n as A,x as wt}from"./extantPropsUtils-DAFKIOU6.js";import{e as Dt,L as St,u as xt,a as Ot,b as Pt,c as Tt,F as It,p as qt,S as Lt,B as Ft}from"./SelectIcon-xcepUqDD.js";import{c as Vt,D as Et,A as At,C as Rt}from"./PickerCaret-zbcaennR.js";import{P as jt,u as Bt}from"./useDropdownToggle-fDgQm5OK.js";import{m as le,d as Te,e as ie,a as ue}from"./PropTypes-4_mVf3cx.js";import{u as Kt}from"./useAutoFocus-C-hyYZgz.js";import{u as Nt}from"./Localization-D1UdyYev.js";const ce=2**31-1;function Ie(l,s,o){const r=o-Date.now();l.current=r<=ce?setTimeout(s,r):setTimeout(()=>Ie(l,s,o),ce)}function _t(){const l=yt(),s=f.useRef();return Dt(()=>clearTimeout(s.current)),f.useMemo(()=>{const o=()=>clearTimeout(s.current);function r(i,c=0){l()&&(o(),c<=ce?s.current=setTimeout(i,c):Ie(s,i,Date.now()+c))}return{set:r,clear:o,handleRef:s}},[])}const qe=u.forwardRef(function({name:l,autoComplete:s,value:o,allowSearch:r,placeholder:i,textAccessor:c,dataKeyAccessor:C,searchTerm:D,onSearch:j,onAutofill:b,onAutofillChange:B,renderValue:O,disabled:P,readOnly:T},Y){const[K,m]=f.useState(!1),N=f.useRef(null),J=({animationName:y})=>{let q;if(y==="react-widgets-autofill-start")q=!0;else if(y==="react-widgets-autofill-cancel")q=!1;else return;m(q),b(q)},Q=y=>{m(!1),B(y)};let _=C(o),W=o==null?"":c(o),I=String(_??"");I===String({})&&(I="");const G=!o&&i?u.createElement("span",{className:"rw-placeholder"},i):O?O({item:o,dataKey:_,text:W}):W;f.useImperativeHandle(Y,()=>({focus(){N.current&&N.current.focus()}}));const k=K?{display:"none"}:void 0;return u.createElement("div",{className:"rw-dropdown-list-input"},s!=="off"&&u.createElement("input",{name:l,tabIndex:-1,disabled:P,readOnly:T,value:I??"",autoComplete:s,onChange:Q,onAnimationStart:J,"aria-hidden":!K,className:X("rw-detect-autofill",!K&&"rw-sr")}),u.createElement(u.Fragment,null,r&&u.createElement("input",{ref:N,disabled:P,readOnly:T,style:k,className:"rw-dropdownlist-search",autoComplete:"off",value:D||"",size:(D||"").length+2,onChange:j}),!D&&u.createElement("span",{className:"rw-dropdown-list-value",style:k},G)))});qe.displayName="DropdownListInput";const kt=["id","autoFocus","textField","dataKey","value","defaultValue","onChange","open","defaultOpen","onToggle","searchTerm","defaultSearchTerm","onSearch","filter","allowCreate","delay","focusFirstItem","className","containerClassName","placeholder","busy","disabled","readOnly","selectIcon","busySpinner","dropUp","tabIndex","popupTransition","name","autoComplete","onSelect","onCreate","onKeyPress","onKeyDown","onClick","inputProps","listProps","popupProps","renderListItem","renderListGroup","optionComponent","renderValue","groupBy","onBlur","onFocus","listComponent","popupComponent","data","messages"];function R(){return R=Object.assign||function(l){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(l[r]=o[r])}return l},R.apply(this,arguments)}function Ut(l,s){if(l==null)return{};var o={},r=Object.keys(l),i,c;for(c=0;c<r.length;c++)i=r[c],!(s.indexOf(i)>=0)&&(o[i]=l[i]);return o}const $t={value:e.any,onChange:e.func,open:e.bool,onToggle:e.func,data:e.array,dataKey:ue,textField:ue,allowCreate:e.oneOf([!0,!1,"onFilter"]),renderValue:e.func,renderListItem:e.func,listComponent:ie,optionComponent:ie,renderPopup:e.func,renderListGroup:e.func,groupBy:ue,onSelect:e.func,onCreate:e.func,onSearch:e.func,searchTerm:e.string,busy:e.bool,selectIcon:e.node,busySpinner:e.node,placeholder:e.string,dropUp:e.bool,popupTransition:ie,disabled:Te.acceptsArray,readOnly:Te,containerClassName:e.string,inputProps:e.object,listProps:e.object,messages:e.shape({open:e.string,emptyList:le,emptyFilter:le,createOption:le})};function Wt(l){const s=_t(),o=f.useRef("");function r(i,c){let C=(o.current+i).toLowerCase();i&&(o.current=C,s.set(()=>{o.current="",c(C)},l))}return r}const de=u.forwardRef(function(s,o){let{id:r,autoFocus:i,textField:c,dataKey:C,value:D,defaultValue:j,onChange:b,open:B,defaultOpen:O=!1,onToggle:P,searchTerm:T,defaultSearchTerm:Y="",onSearch:K,filter:m=!0,allowCreate:N=!1,delay:J=500,focusFirstItem:Q,className:_,containerClassName:W,placeholder:I,busy:G,disabled:k,readOnly:y,selectIcon:q=gt,busySpinner:Le,dropUp:fe,tabIndex:Fe,popupTransition:Ve,name:Ee,autoComplete:Ae,onSelect:Re,onCreate:je,onKeyPress:Be,onKeyDown:Ke,onClick:Ne,inputProps:_e,listProps:ke,popupProps:Ue,renderListItem:$e,renderListGroup:We,optionComponent:Ge,renderValue:Me,groupBy:He,onBlur:ze,onFocus:Xe,listComponent:Ye=St,popupComponent:Je=jt,data:Z=[],messages:Qe}=s,U=Ut(s,kt);const[L,Ze]=re(D,j,b),[a,et]=re(B,O,P),[h,tt]=re(T,Y,K),F=f.useRef(null),me=f.useRef(null),ye=f.useRef(null),ge=ae(r,"_input"),$=ae(r,"_listbox"),he=ae(r,"_listbox_active_option"),p=xt(c,C),ee=Nt(Qe);Kt(!!i,F);const v=Bt(a,et),w=k===!0,be=!!y,[nt,Ce]=ht(F,{disabled:w,onBlur:ze,onFocus:Xe},{didHandle(t){if(t){m&&S();return}v.close(),M()}}),V=Ot(Z,a?m:!1,h,p.text),ve=f.useMemo(()=>V[p.indexOf(V,L)],[V,L,p]),d=Pt({activeId:he,scope:F,focusFirstItem:Q,anchorItem:a?ve:void 0}),[ot,st]=f.useState(!1),rt=Wt(J),we=d.getFocused();Tt(F,he,we&&a,[we]);const De=Vt(N,{searchTerm:h,data:V,accessors:p}),te=t=>{A(je,[h]),M(t),v.close(),S()},Se=(t,n)=>{if(!(y||w)&&t!==void 0){if(n?.preventDefault(),t===Rt){te(n);return}A(Re,[t,{originalEvent:n}]),ne(t,n,!0),v.close(),S()}},at=t=>{y||w||(t.preventDefault(),S(),v(),A(Ne,[t]))},lt=t=>{if(y||w)return;let{key:n,altKey:g,ctrlKey:E,shiftKey:H}=t;A(Ke,[t]);let x=()=>{M(),v.close(),a&&setTimeout(S)};if(!t.defaultPrevented){if(n==="End"&&a&&!H)t.preventDefault(),d.focus(d.last());else if(n==="Home"&&a&&!H)t.preventDefault(),d.focus(d.first());else if(n==="Escape"&&(a||h))t.preventDefault(),x();else if(n==="Enter"&&a&&E&&De)t.preventDefault(),te(t);else if((n==="Enter"||n===" "&&!m)&&a)t.preventDefault(),d.hasFocused()&&Se(d.getFocused(),t);else if(n==="ArrowDown"){if(t.preventDefault(),!a){v.open();return}d.focus(d.next())}else if(n==="ArrowUp"){if(t.preventDefault(),g)return x();d.focus(d.prev())}}},it=t=>{y||w||(A(Be,[t]),!(t.defaultPrevented||m)&&rt(String.fromCharCode(t.which),n=>{if(!a)return;let g=se=>qt.startsWith(p.text(se).toLowerCase(),n.toLowerCase());const[E,H]=d.get(),x=E.length,Oe=E.indexOf(H)+1,Pe=Oe>=x?0:Oe;let z=0,oe=Pe;for(;z<x;){oe=(z+Pe)%x;let se=E[oe];if(g(d.toDataItem(se)))break;z++}z!==x&&d.focus(E[oe])}))},ut=t=>{!a&&!t.target.value.trim()?t.preventDefault():xe(t.target.value,t,"input"),v.open()},ct=t=>{let n=t.target.value.toLowerCase();if(n==="")return void ne(null);for(const g of Z)if(String(p.value(g)).toLowerCase()===n||p.text(g).toLowerCase()===n){ne(g,t);break}};function ne(t,n,g=!1){p.matches(t,L)||(A(Ze,[t,{originalEvent:n,source:g?"listbox":"input",lastValue:L,searchTerm:h}]),M(n),v.close())}function S(){m?me.current.focus():F.current.focus()}function M(t){xe("",t,"clear")}function xe(t,n,g="input"){h!==t&&tt(t,{action:g,originalEvent:n,lastSearchTerm:h})}f.useImperativeHandle(o,()=>({focus:S}));let dt=p.findOrSelf(V,L),pt=bt(Ce,a);const ft=Object.assign({},U,{role:"combobox",id:ge,tabIndex:m?-1:Fe||0,"aria-owns":U["aria-owns"]?`${$} ${U["aria-owns"]}`:$,"aria-controls":U["aria-controls"]?`${$} ${U["aria-controls"]}`:$,"aria-expanded":!!a,"aria-haspopup":"listbox","aria-busy":!!G,"aria-live":a?"polite":void 0,"aria-autocomplete":"list","aria-disabled":w,"aria-readonly":be});return u.createElement(It.Provider,{value:d.context},u.createElement(Ct,R({},ft,{open:!!a,dropUp:!!fe,focused:!!Ce,disabled:w,readOnly:be,autofilling:ot},nt,{onKeyDown:lt,onKeyPress:it,className:X(_,"rw-dropdown-list"),ref:F}),u.createElement(vt,{onClick:at,tabIndex:m?-1:0,className:X(W,"rw-widget-input")},u.createElement(qe,R({},_e,{value:dt,dataKeyAccessor:p.value,textAccessor:p.text,name:Ee,readOnly:y,disabled:w,allowSearch:!!m,searchTerm:h,ref:me,autoComplete:Ae,onSearch:ut,onAutofill:st,onAutofillChange:ct,placeholder:I,renderValue:Me})),u.createElement(Et,{visible:!0,busy:G,icon:q,spinner:Le})),pt&&u.createElement(Je,R({},Ue,{dropUp:fe,open:a,transition:Ve,onEntered:S,onEntering:()=>ye.current.scrollIntoView()}),u.createElement(Ye,R({},ke,{id:$,data:V,tabIndex:-1,disabled:k,groupBy:He,searchTerm:h,accessors:p,renderItem:$e,renderGroup:We,optionComponent:Ge,value:ve,onChange:(t,n)=>Se(t,n.originalEvent),"aria-live":a?"polite":void 0,"aria-labelledby":ge,"aria-hidden":!a,ref:ye,messages:{emptyList:Z.length?ee.messages.emptyFilter:ee.messages.emptyList}})),De&&u.createElement(At,{onSelect:te},ee.messages.createOption(L,h||"")))))});de.displayName="DropdownList";de.propTypes=$t;const pe=l=>{const{contextCls:s,hasError:o,filter:r,onChange:i,onSelect:c,onToggle:C,renderBusySpinner:D,renderSelectIcon:j}=l,b="bankai-dropdown",B={[`${b}--error`]:o,[`${b}--no-filter`]:!r},O=wt(l),P=D({baseCls:b}),T=j({baseCls:b});return mt.jsx(de,{...O,className:X(b,B,s),busySpinner:P,selectIcon:T,onChange:i,onSelect:c,onToggle:C})};pe.defaultProps={filter:!1,hasError:!1,isBusy:!1,isDefaultOpen:!1,isDisabled:!1,isReadOnly:!1,shouldAutoFocus:!1,shouldDropUp:!1,data:[],onChange:()=>Promise.resolve(),onSelect:()=>Promise.resolve(),onToggle:()=>Promise.resolve(),renderBusySpinner:Ft,renderSelectIcon:Lt};pe.propTypes={contextCls:e.string,id:e.string,name:e.string,placeholder:e.string,delay:e.number,hasError:e.bool,isBusy:e.bool,isDefaultOpen:e.bool,isDisabled:e.bool,isOpen:e.bool,isReadOnly:e.bool,shouldAutoFocus:e.bool,shouldDropUp:e.bool,data:e.array,disabledOptions:e.array,inputProps:e.object,listProps:e.object,messages:e.object,dataKey:e.oneOfType([e.string,e.func]),defaultValue:e.oneOfType([e.string,e.array,e.object]),filter:e.oneOfType([e.string,e.func,e.bool]),groupBy:e.oneOfType([e.string,e.func]),listComponent:e.oneOfType([e.element,e.func]),optionComponent:e.oneOfType([e.element,e.string]),textField:e.oneOfType([e.string,e.func]),value:e.oneOfType([e.string,e.array,e.object]),onChange:e.func,onSelect:e.func,onToggle:e.func,renderBusySpinner:e.func,renderListGroup:e.func,renderListItem:e.func,renderSelectIcon:e.func,renderValue:e.func};pe.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{filter:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"func"},{name:"bool"}]},required:!1},hasError:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isBusy:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isDefaultOpen:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isDisabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isReadOnly:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldAutoFocus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldDropUp:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},data:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onSelect:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onToggle:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},renderBusySpinner:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiSpinner contextCls={\`\${baseCls}__busy-icon\`} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},renderSelectIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiChevronDown contextCls={\`\${baseCls}__select-icon\`} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},contextCls:{description:"",type:{name:"string"},required:!1},id:{description:"",type:{name:"string"},required:!1},name:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},delay:{description:"",type:{name:"number"},required:!1},isOpen:{description:"",type:{name:"bool"},required:!1},disabledOptions:{description:"",type:{name:"array"},required:!1},inputProps:{description:"",type:{name:"object"},required:!1},listProps:{description:"",type:{name:"object"},required:!1},messages:{description:"",type:{name:"object"},required:!1},dataKey:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1},defaultValue:{description:"",type:{name:"union",value:[{name:"string"},{name:"array"},{name:"object"}]},required:!1},groupBy:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1},listComponent:{description:"",type:{name:"union",value:[{name:"element"},{name:"func"}]},required:!1},optionComponent:{description:"",type:{name:"union",value:[{name:"element"},{name:"string"}]},required:!1},textField:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1},value:{description:"",type:{name:"union",value:[{name:"string"},{name:"array"},{name:"object"}]},required:!1},renderListGroup:{description:"",type:{name:"func"},required:!1},renderListItem:{description:"",type:{name:"func"},required:!1},renderValue:{description:"",type:{name:"func"},required:!1}}};export{pe as D};
