import{c as L,P as l}from"./localeUtils--UUmbdnw.js";import{R as m,r as c}from"./iframe-X-brMXKZ.js";import{q as ue,g as oe,t as ce,m as ie}from"./useDropdownToggle-fDgQm5OK.js";import{i as le,j as ae,a as fe,b as de}from"./extantPropsUtils-DAFKIOU6.js";import{d as pe,a as N}from"./PropTypes-4_mVf3cx.js";import{j as P}from"./jsx-runtime-DN5Rltsz.js";import{B as me}from"./BankaiSpinner-CFdc15Ly.js";import{B as ge}from"./BankaiChevronDown-BMAwoy6z.js";const ye=m.createContext(null),_={behavior:"stop"};function he(t){const e=c.useContext(ye),n=c.useRef(null),r=c.useRef(null);c.useLayoutEffect(()=>()=>{e?.map.delete(r.current)},[]),c.useLayoutEffect(()=>{n.current!==r.current&&e?.map.delete(n.current),n.current=r.current,r.current&&e?.map.get(r.current)!==t&&e?.map.set(r.current,t)});const s=t===e?.focusedItem;return[r,s,s?e?.activeId:void 0]}const et=({scope:t,anchorItem:e,focusFirstItem:n=!1,scopeSelector:r="",activeId:s})=>{const u=c.useMemo(()=>new WeakMap,[]),[a,p]=c.useState(),g=`${r} [data-rw-focusable]`.trim(),d=()=>{const o=ue(t.current,g);return[o,o.find(i=>i.dataset.rwFocused==="")]},f=c.useMemo(()=>({size(){const[o]=d();return o.length},get:d,toDataItem:o=>u.get(o),first(){const[[o]]=d();return o},focus(o){(!o||u.has(o))&&p(o?u.get(o):void 0)},last(){const[o]=d();return o[o.length-1]},next({behavior:o}=_){const[i,x]=d();let y=i.indexOf(x)+1;return y>=i.length?o==="loop"?i[0]:o==="clear"?void 0:x:i[y]},prev({behavior:o}=_){const[i,x]=d();let y=Math.max(0,i.indexOf(x))-1;return y<0?o==="loop"?i[i.length-1]:o==="clear"?void 0:x:i[y]}}),[]);c.useLayoutEffect(()=>{if(!e){f.focus(null);return}const o=d()[0].find(i=>f.toDataItem(i)===e);f.focus(o)},[e]),c.useLayoutEffect(()=>{if(!t.current)return;const[,o]=d(),i=o!=null;(!i&&n||i&&!t.current.contains(o))&&(n?f.focus(f.first()):f.focus(null))});const w=c.useMemo(()=>({map:u,focusedItem:a,activeId:s}),[a,s]);return f.context=w,f.getFocused=c.useCallback(()=>a,[a]),f.hasFocused=()=>a!==void 0,f},xe=["className","children","dataItem","selected","disabled","onSelect","searchTerm"];function S(){return S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S.apply(this,arguments)}function ve(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,u;for(u=0;u<r.length;u++)s=r[u],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const we={activeId:l.string,dataItem:l.any,selected:l.bool.isRequired,onSelect:l.func.isRequired,component:l.any};function $(t){let{className:e,children:n,dataItem:r,selected:s,disabled:u,onSelect:a}=t,p=ve(t,xe);const[g,d,f]=he(r),w=i=>{a&&!u&&a(r,i)};let o={"rw-state-focus":d,"rw-state-selected":s,"rw-state-disabled":u};return m.createElement("div",S({id:f,ref:g,role:"option","data-rw-option":"","data-rw-focused":d?"":void 0,"data-rw-focusable":u?void 0:"",tabIndex:-1,"aria-selected":!!s,className:L("rw-list-option",e,o),onClick:w},p),n)}$.propTypes=we;const be={className:l.string,component:l.string};function z({children:t,className:e,component:n="div"}){let r=n;return m.createElement(r,{tabIndex:"-1",role:"separator",className:L(e,"rw-list-optgroup")},t)}z.propTypes=be;function Ee(t,e,n){const r=le(),{isEqual:s,effectHook:u=c.useEffect}=typeof n=="function"?{isEqual:n}:n,a=c.useRef();a.current=e;const p=c.useRef(null);u(()=>{if(p.current===null){const g=t();p.current=()=>{r()&&s(a.current,e)||(p.current=null,g&&g())}}return p.current}),c.useDebugValue(t)}var A=Object.prototype.hasOwnProperty;function F(t,e,n){for(n of t.keys())if(b(n,e))return n}function b(t,e){var n,r,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&b(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(s=r,s&&typeof s=="object"&&(s=F(e,s),!s)||!e.has(s))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(s=r[0],s&&typeof s=="object"&&(s=F(e,s),!s)||!b(r[1],e.get(s)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(A.call(t,n)&&++r&&!A.call(e,n)||!(n in e)||!b(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function Re(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Se(t,e){let n=!0;const r=c.useRef();r.current?n=!!(e&&r.current.deps&&Re(e,r.current.deps)):r.current={deps:e,result:t()};const s=n?r.current:{deps:e,result:t()};return r.current=s,s.result}function Ie(t){const e=c.useRef(t);return e.current=t,e}function Le(t){const e=Ie(t);c.useEffect(()=>()=>e.current(),[])}function Ce(t,e){const n=c.useRef(!0),r=c.useRef();Le(()=>{r.current&&r.current()}),Se(()=>{if(n.current){n.current=!1;return}r.current&&r.current(),r.current=t()},e)}function Oe([t,e],[n,r]){return t===n&&b(e,r)}function je(t,e,n){const[r,s]=c.useState(null),u=ae(n||s);return Ee(()=>{if(!t)return;const a=new MutationObserver(u);return a.observe(t,e),()=>{a.disconnect()}},[t,e],{isEqual:Oe,effectHook:Ce}),n?void 0:r||[]}function Me(){return c.useState(null)}const B=t=>!t||typeof t=="function"?t:e=>{t.current=e};function Te(t,e){const n=B(t),r=B(e);return s=>{n&&n(s),r&&r(s)}}function ke(t,e){return c.useMemo(()=>Te(t,e),[t,e])}const De=["multiple","data","value","onChange","accessors","className","messages","disabled","renderItem","renderGroup","searchTerm","groupBy","elementRef","optionComponent","renderList"];function qe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,u;for(u=0;u<r.length;u++)s=r[u],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const Ve=["style","className","role","id","autocomplete","size","tabIndex","maxLength","name"],Ne=[/^aria-/,/^data-/,/^on[A-Z]\w+/];function _e(t){const e={};return Object.keys(t).forEach(n=>{(Ve.indexOf(n)!==-1||Ne.some(r=>!!n.match(r)))&&(e[n]=t[n])}),e}const Ae={data:l.array,dataKey:N,textField:N,onSelect:l.func,onMove:l.func,onHoverOption:l.func,optionComponent:l.elementType,renderItem:l.func,renderGroup:l.func,focusedItem:l.any,selectedItem:l.any,searchTerm:l.string,disabled:pe.acceptsArray,messages:l.shape({emptyList:l.func.isRequired})},Fe=(t,e=!1)=>{const n=c.useCallback(()=>{if(!t)return;let r=t.querySelector("[data-rw-focused]");r&&r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"})},[t]);return je(e?t:null,{subtree:!0,attributes:!0,attributeFilter:["data-rw-focused"]},n),n};function Be(t,e,n){return(r,s)=>{if(t===!1){n(r,{dataItem:r,lastValue:e[0],originalEvent:s});return}const u=e.includes(r);n(u?e.filter(a=>a!==r):[...e,r],{dataItem:r,lastValue:e,action:u?"remove":"insert",originalEvent:s})}}const W=m.forwardRef(function(e,n){var r;let{multiple:s=!1,data:u=[],value:a,onChange:p,accessors:g,className:d,messages:f,disabled:w,renderItem:o,renderGroup:i,searchTerm:x,groupBy:y,elementRef:Z,optionComponent:J=$,renderList:C}=e,Q=qe(e,De);const X=fe(),O=ie(a,s),j=c.useMemo(()=>y?oe(y,u):void 0,[u,y]),[Y,K]=Me(),ee=ce(w),{emptyList:te}=de(f),ne=ke(K,Z),re=Be(s,O,p),M=Fe(Y,!0);let T=_e(Q);c.useImperativeHandle(n,()=>({scrollIntoView:M}),[M]);function k(h,E){const R=g.text(h),V=ee.includes(h),se=O.includes(h);return m.createElement(J,{dataItem:h,key:`item_${E}`,searchTerm:x,onSelect:re,disabled:V,selected:se},o?o({item:h,searchTerm:x,index:E,text:R,value:g.value(h),disabled:V}):R)}const D=j?j.map(([h,E],R)=>m.createElement("div",{role:"group",key:`group_${R}`},m.createElement(z,null,i?i({group:h}):h),E.map(k))):u.map(k),q=Object.assign({id:X,tabIndex:0,ref:ne},T,{"aria-multiselectable":!!s,className:L(d,"rw-list"),role:(r=T.role)!=null?r:"listbox",children:m.Children.count(D)?D:m.createElement("div",{className:"rw-list-empty"},te())});return C?C(q):m.createElement("div",q)});W.displayName="List";W.propTypes=Ae;const Pe=(t,e)=>{t&&(t.removeAttribute("aria-activedescendant"),e&&t.setAttribute("aria-activedescendant",e))},tt=(t,e,n,r)=>{c.useEffect(()=>{Pe(t.current,n?e:"")},[t,e,n,...r])},v=(t,e)=>typeof e=="function"?e(t):t==null?t:typeof e=="string"&&typeof t=="object"&&e in t?t[e]:t,U=(t,e)=>{const n=v(t,e);return n==null?"":String(n)};function $e(t,e,n){return v(t,n)===v(e,n)}function I(t,e,n){const r=v(e,n);let s=-1;for(;++s<t.length;){const u=t[s];if(u===e||v(u,n)===r)return s}return-1}function ze(t,e,n){const r=I(t,e,n);return r!==-1?t[r]:e}const nt=(t,e)=>c.useMemo(()=>({text:n=>U(n,t),value:n=>v(n,e),indexOf:(n,r)=>I(n,r,e),matches:(n,r)=>$e(n,r,e),findOrSelf:(n,r)=>ze(n,r,e),includes:(n,r)=>I(n,r,e)!==-1}),[t,e]),We={eq:(t,e)=>t===e,contains:(t,e)=>t.indexOf(e)!==-1,startsWith:(t,e)=>t.lastIndexOf(e,0)===0};function Ue(t,e){if(t===!1)return null;if(typeof t=="function")return t;const n=We[t===!0?"startsWith":t||"eq"];return(r,s)=>{let u=U(r,e);return n(u.toLowerCase(),s.toLowerCase())}}function rt(t,e,n="",r){return c.useMemo(()=>{const s=Ue(e,r);return!s||!n.trim()?t:t.filter((u,a)=>s(u,n,a))},[t,e,n,r])}const H=t=>{const{baseCls:e}=t;return P.jsx(me,{contextCls:`${e}__busy-icon`})};H.propTypes={baseCls:l.string};H.__docgenInfo={description:"",methods:[],displayName:"BusySpinner",props:{baseCls:{description:"",type:{name:"string"},required:!1}}};const G=t=>{const{baseCls:e}=t;return P.jsx(ge,{contextCls:`${e}__select-icon`})};G.propTypes={baseCls:l.string};G.__docgenInfo={description:"",methods:[],displayName:"SelectIcon",props:{baseCls:{description:"",type:{name:"string"},required:!1}}};export{H as B,ye as F,W as L,G as S,rt as a,et as b,tt as c,he as d,Le as e,$ as f,We as p,Pe as s,nt as u};
