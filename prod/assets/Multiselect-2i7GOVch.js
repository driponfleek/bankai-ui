import{j as xe}from"./jsx-runtime-DN5Rltsz.js";import{P as e,c as M}from"./localeUtils--UUmbdnw.js";import{m as Ct,t as vt,u as ne,a as V,b as Tt,d as Ot,e as It,W as wt,f as St,n as ae,h as xt}from"./extantPropsUtils-DAFKIOU6.js";import{R as p,r as C}from"./iframe-X-brMXKZ.js";import{c as Pt,D as Dt,A as qt,C as Et}from"./PickerCaret-zbcaennR.js";import{d as Ft,L as Vt,u as Lt,b as Oe,s as Ie,F as we,a as Rt,S as _t,B as Bt}from"./SelectIcon-xcepUqDD.js";import{d as j,m as x,a as se}from"./PropTypes-4_mVf3cx.js";import{P as Nt,u as kt}from"./useDropdownToggle-fDgQm5OK.js";import{B as Mt}from"./BankaiX-B_vDerzI.js";function jt(s,n,r){s.closest&&!r&&s.closest(n);var a=s;do{if(Ct(a,n))return a;a=a.parentElement}while(a&&a!==r&&a.nodeType===document.ELEMENT_NODE);return null}const At=["disabled","readOnly"];function oe(){return oe=Object.assign||function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},oe.apply(this,arguments)}function Kt(s,n){if(s==null)return{};var r={},a=Object.keys(s),o,i;for(i=0;i<a.length;i++)o=a[i],!(n.indexOf(o)>=0)&&(r[o]=s[o]);return r}const Wt={value:e.string,placeholder:e.string,maxLength:e.number,onChange:e.func.isRequired,disabled:j,readOnly:j},le=p.forwardRef((s,n)=>{let{disabled:r,readOnly:a}=s,o=Kt(s,At),i=Math.max(String(o.value||o.placeholder||"").length,1)+1;return p.createElement("input",oe({spellCheck:"false",autoCapitalize:"off"},o,{size:i,ref:n,autoComplete:"off",className:"rw-multiselect-input","aria-disabled":r,"aria-readonly":a,disabled:r,readOnly:a}))});le.displayName="MultiselectInput";le.propTypes=Wt;function Ut({className:s,children:n,style:r,label:a,disabled:o,readOnly:i,onRemove:d,clearTagIcon:h,dataItem:v}){const[T,m,y]=Ft(v),O=P=>{o||d(v,P)};return p.createElement("div",{ref:T,role:"option",id:y,"data-rw-option":"","data-rw-focusable":o?void 0:"","data-rw-focused":m?"":void 0,className:M(s,"rw-multiselect-tag",o&&"rw-state-disabled",m&&!o&&"rw-state-focus"),style:r},p.createElement("span",{className:"rw-multiselect-tag-label"},n),p.createElement("button",{type:"button",tabIndex:-1,onClick:O,onTouchEnd:O,disabled:o||i,className:"rw-multiselect-tag-btn","aria-label":a||"Remove item"},h))}function $t({id:s,value:n,textAccessor:r,label:a,disabled:o,readOnly:i,onDelete:d,children:h,clearTagIcon:v,renderTagValue:T,tagOptionComponent:m=Ut}){return p.createElement("div",{id:s,role:"listbox","aria-label":a,"aria-multiselectable":"true","aria-orientation":"horizontal",className:"rw-multiselect-taglist"},n.map((y,O)=>{const P=Array.isArray(o)?o.includes(y):!!o;return p.createElement(m,{key:O,dataItem:y,onRemove:d,clearTagIcon:v,disabled:P,readOnly:i},T?T({item:y}):r(y))}),h)}const Gt=["dataKey","textField","autoFocus","id","value","defaultValue","onChange","open","defaultOpen","onToggle","focusFirstItem","searchTerm","defaultSearchTerm","onSearch","filter","allowCreate","className","containerClassName","placeholder","busy","disabled","readOnly","selectIcon","clearTagIcon","busySpinner","dropUp","tabIndex","popupTransition","showPlaceholderWithValues","showSelectedItemsInList","onSelect","onCreate","onKeyDown","onBlur","onFocus","inputProps","listProps","popupProps","renderListItem","renderListGroup","renderTagValue","optionComponent","tagOptionComponent","groupBy","listComponent","popupComponent","tagListComponent","data","messages"];function L(){return L=Object.assign||function(s){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},L.apply(this,arguments)}function zt(s,n){if(s==null)return{};var r={},a=Object.keys(s),o,i;for(i=0;i<a.length;i++)o=a[i],!(n.indexOf(o)>=0)&&(r[o]=s[o]);return r}const Ht=13,Se="insert",re="remove";let Xt={data:e.array,value:e.array,onChange:e.func,searchTerm:e.string,onSearch:e.func,open:e.bool,handleOpen:e.func,dataKey:se,textField:se,renderTagValue:e.func,renderListItem:e.func,renderListGroup:e.func,groupBy:se,allowCreate:e.oneOf([!0,!1,"onFilter"]),onSelect:e.func,onCreate:e.func,busy:e.bool,selectIcon:e.node,clearTagIcon:e.node,busySpinner:e.node,dropUp:e.bool,popupTransition:e.elementType,containerClassName:e.string,inputProps:e.object,listProps:e.object,autoFocus:e.bool,placeholder:e.string,showPlaceholderWithValues:e.bool,showSelectedItemsInList:e.bool,disabled:j.acceptsArray,readOnly:j,messages:e.shape({open:x,emptyList:x,emptyFilter:x,createOption:x,tagsLabel:x,selectedItems:x,noneSelected:x,removeLabel:x})};const Yt=[];function Jt(s=Yt,n,r,a,o,i){return n=C.useMemo(()=>i?n:n.filter(d=>!s.some(h=>r.matches(d,h))),[n,i,s,r]),[Rt(n,a||!1,o,r.text),n.length]}const ie=p.forwardRef(function(n,r){let{dataKey:a,textField:o,autoFocus:i,id:d,value:h,defaultValue:v=[],onChange:T,open:m,defaultOpen:y=!1,onToggle:O,focusFirstItem:P=!1,searchTerm:A,defaultSearchTerm:K="",onSearch:Pe,filter:De="startsWith",allowCreate:qe=!1,className:Ee,containerClassName:Fe,placeholder:Ve,busy:pe,disabled:W,readOnly:B,selectIcon:Le,clearTagIcon:Re=vt,busySpinner:_e,dropUp:de,tabIndex:Be,popupTransition:Ne,showPlaceholderWithValues:ke=!1,showSelectedItemsInList:fe=!1,onSelect:Me,onCreate:je,onKeyDown:Ae,onBlur:Ke,onFocus:We,inputProps:Ue,listProps:$e,popupProps:Ge,renderListItem:ze,renderListGroup:He,renderTagValue:Xe,optionComponent:Ye,tagOptionComponent:Je,groupBy:Qe,listComponent:Ze=Vt,popupComponent:et=Nt,tagListComponent:tt=$t,data:U=[],messages:nt}=n,at=zt(n,Gt),[R,st]=ne(h,v,T);const[u,rt]=ne(m,y,O),[g,ot]=ne(A,K,Pe),N=C.useRef(null),I=C.useRef(null),me=C.useRef(null),lt=V(d,"_input"),ye=V(d,"_taglist"),$=V(d,"_listbox"),it=V(d,"_createlist_option"),G=V(d,"_taglist_active_tag"),z=V(d,"_listbox_active_option"),q=Lt(o,a),k=Tt(nt),w=kt(u,rt),E=W===!0,H=!!B,[ut,X]=Ot(N,{disabled:E,onBlur:Ke,onFocus:We},{didHandle(t,l){if(t)return D();w.close(),ee(l),c.focus(null)}}),b=C.useMemo(()=>R.map(t=>q.findOrSelf(U,t)),[U,R,q]),[ge,ct]=Jt(b,U,q,u?De:!1,g,fe),f=Oe({scope:N,scopeSelector:".rw-popup",focusFirstItem:P,activeId:z,anchorItem:u?b[b.length-1]:void 0}),c=Oe({scope:N,scopeSelector:".rw-multiselect-taglist",activeId:G}),Y=Pt(qe,{searchTerm:g,data:ge,dataItems:b,accessors:q}),he=c.getFocused();C.useEffect(()=>{u||Ie(I.current,he?G:"")},[G,u,he]);const be=f.getFocused();C.useEffect(()=>{u&&Ie(I.current,be?z:"")},[z,u,be]);const J=(t,l)=>{E||B||c.size()===0||(D(),Z(t,l,re))},_=C.useRef(!1),pt=t=>{t.key==="Backspace"&&t.currentTarget.value&&!_.current&&(_.current=!0)},dt=t=>{t.key==="Backspace"&&_.current&&(_.current=!1)},ft=t=>{Te(t.target.value,t,"input"),w.open()},Ce=t=>{E||B||(t.preventDefault(),D(),jt(t.target,".rw-select")&&u?w.close():w.open())},mt=()=>{E||!I.current||(D(),I.current&&I.current.select())},ve=(t,l)=>{if(t!==void 0){if(l.preventDefault(),t===Et){Q(l);return}ae(Me,[t,{originalEvent:l}]),!fe||!b.includes(t)?Z(t,l,Se):Z(t,l,re),D()}},Q=t=>{ae(je,[g]),ee(t),D()},yt=t=>{if(B){t.preventDefault();return}let{key:l,keyCode:F,altKey:S,ctrlKey:te}=t;if(ae(Ae,[t]),!t.defaultPrevented)if(l==="ArrowDown"){if(t.preventDefault(),!u){w.open();return}f.focus(f.next()),c.focus(null)}else if(l==="ArrowUp"&&(u||S)){if(t.preventDefault(),S){w.close();return}f.focus(f.prev()),c.focus(null)}else if(l==="End")t.preventDefault(),u?(f.focus(f.last()),c.focus(null)):(c.focus(c.last()),f.focus(null));else if(l==="Home")t.preventDefault(),u?f.focus(f.first()):f.focus(c.first());else if(u&&F===Ht){if(t.preventDefault(),te&&Y)return Q(t);ve(f.getFocused(),t)}else l==="Escape"?u?w.close():c.focus(null):!g&&!_.current&&(l==="ArrowLeft"?c.focus(c.prev({behavior:"loop"})):l==="ArrowRight"?c.focus(c.next({behavior:"loop"})):l==="Delete"&&c.getFocused()?J(c.getFocused(),t):l==="Backspace"?J(c.toDataItem(c.last()),t):l===" "&&!u&&(t.preventDefault(),w.open()))};function Z(t,l,F){let S=b;switch(F){case Se:S=S.concat(t);break;case re:S=S.filter(te=>te!==t);break}st(S,{action:F,dataItem:t,originalEvent:l,searchTerm:g,lastValue:R}),ee(l)}function ee(t){Te("",t,"clear")}function Te(t,l,F="input"){t!==g&&ot(t,{action:F,originalEvent:l,lastSearchTerm:g})}function D(){I.current&&I.current.focus()}C.useImperativeHandle(r,()=>({focus:D}));let gt=It(X,u),ht=!!b.length,bt=`${$} `+(ht?ye:"")+(Y?it:"");return p.createElement(wt,L({},at,{ref:N,open:u,dropUp:de,focused:X,disabled:E,readOnly:H,onKeyDown:yt},ut,{className:M(Ee,"rw-multiselect")}),p.createElement(St,{onClick:Ce,onTouchEnd:Ce,onDoubleClick:mt,className:M(Fe,"rw-widget-input")},p.createElement(we.Provider,{value:c.context},p.createElement(tt,{id:ye,textAccessor:q.text,clearTagIcon:Re,label:k.tagsLabel(),value:b,readOnly:H,disabled:W,onDelete:J,tagOptionComponent:Je,renderTagValue:Xe},p.createElement(le,L({},Ue,{role:"combobox",autoFocus:i,tabIndex:Be||0,"aria-expanded":!!u,"aria-busy":!!pe,"aria-owns":bt,"aria-controls":$,"aria-haspopup":"listbox","aria-autocomplete":"list",value:g,disabled:E,readOnly:H,placeholder:(R.length&&!ke?"":Ve)||"",onKeyDown:pt,onKeyUp:dt,onChange:ft,ref:I})))),p.createElement(Dt,{busy:pe,spinner:_e,icon:Le,visible:X})),p.createElement(we.Provider,{value:f.context},gt&&p.createElement(et,L({},Ge,{dropUp:de,open:u,transition:Ne,onEntering:()=>me.current.scrollIntoView()}),p.createElement(Ze,L({},$e,{id:$,data:ge,tabIndex:-1,disabled:W,searchTerm:g,accessors:q,renderItem:ze,renderGroup:He,value:b,groupBy:Qe,optionComponent:Ye,onChange:(t,l)=>ve(t,l.originalEvent),"aria-live":"polite","aria-labelledby":lt,"aria-hidden":!u,ref:me,messages:{emptyList:ct?k.emptyFilter:k.emptyList}})),Y&&p.createElement(qt,{onSelect:Q},k.createOption(R,g)))))});ie.displayName="Multiselect";ie.propTypes=Xt;const ue=s=>{const{baseCls:n}=s;return xe.jsx(Mt,{contextCls:`${n}__clear-tag-icon`})};ue.propTypes={baseCls:e.string};ue.__docgenInfo={description:"",methods:[],displayName:"ClearTagIcon",props:{baseCls:{description:"",type:{name:"string"},required:!1}}};const ce=s=>{const{contextCls:n,hasError:r,onChange:a,onCreate:o,onSearch:i,onSelect:d,renderBusySpinner:h,renderClearTagIcon:v,renderSelectIcon:T}=s,m="bankai-multiselect",y=xt(s),O={[`${m}--error`]:r},P=h({baseCls:m}),A=T({baseCls:m}),K=v({baseCls:m});return xe.jsx(ie,{...y,className:M(m,O,n),onChange:a,onCreate:o,onSearch:i,onSelect:d,busySpinner:P,selectIcon:A,clearTagIcon:K})};ce.defaultProps={hasError:!1,isBusy:!1,isDefaultOpen:!1,isDisabled:!1,isReadOnly:!1,shouldAutoFocus:!1,shouldDropUp:!1,shouldFocustFirstItem:!1,shouldShowPlaceholderWithValues:!0,data:[],onChange:()=>Promise.resolve(),onCreate:()=>Promise.resolve(),onSearch:()=>Promise.resolve(),onSelect:()=>Promise.resolve(),renderBusySpinner:Bt,renderClearTagIcon:ue,renderSelectIcon:_t};ce.propTypes={contextCls:e.string,defaultSearchTerm:e.string,id:e.string,placeholder:e.string,searchTerm:e.string,hasError:e.bool,isBusy:e.bool,isDefaultOpen:e.bool,isDisabled:e.bool,isOpen:e.bool,isReadOnly:e.bool,shouldAutoFocus:e.bool,shouldDropUp:e.bool,shouldFocustFirstItem:e.bool,shouldShowPlaceholderWithValues:e.bool,data:e.array,defaultValue:e.array,value:e.array,inputProps:e.object,listProps:e.object,messages:e.object,allowCreate:e.oneOfType([e.string,e.bool]),dataKey:e.oneOfType([e.string,e.func]),filter:e.oneOfType([e.string,e.func,e.bool]),groupBy:e.oneOfType([e.string,e.func]),listComponent:e.oneOfType([e.element,e.func]),tagOptionComponent:e.oneOfType([e.element,e.func]),textField:e.oneOfType([e.string,e.func]),onChange:e.func,onCreate:e.func,onSearch:e.func,onSelect:e.func,renderBusySpinner:e.func,renderClearTagIcon:e.func,renderListGroup:e.func,renderListItem:e.func,renderSelectIcon:e.func,renderTagValue:e.func};ce.__docgenInfo={description:"",methods:[],displayName:"Multiselect",props:{hasError:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isBusy:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isDefaultOpen:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isDisabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isReadOnly:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldAutoFocus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldDropUp:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldFocustFirstItem:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},shouldShowPlaceholderWithValues:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},data:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},onChange:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onCreate:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onSearch:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},onSelect:{defaultValue:{value:"() => Promise.resolve()",computed:!1},description:"",type:{name:"func"},required:!1},renderBusySpinner:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiSpinner contextCls={\`\${baseCls}__busy-icon\`} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},renderClearTagIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiX contextCls={\`\${baseCls}__clear-tag-icon\`} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},renderSelectIcon:{defaultValue:{value:`(props) => {
    const { baseCls } = props;

    return <BankaiChevronDown contextCls={\`\${baseCls}__select-icon\`} />;
}`,computed:!1},description:"",type:{name:"func"},required:!1},contextCls:{description:"",type:{name:"string"},required:!1},defaultSearchTerm:{description:"",type:{name:"string"},required:!1},id:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},searchTerm:{description:"",type:{name:"string"},required:!1},isOpen:{description:"",type:{name:"bool"},required:!1},defaultValue:{description:"",type:{name:"array"},required:!1},value:{description:"",type:{name:"array"},required:!1},inputProps:{description:"",type:{name:"object"},required:!1},listProps:{description:"",type:{name:"object"},required:!1},messages:{description:"",type:{name:"object"},required:!1},allowCreate:{description:"",type:{name:"union",value:[{name:"string"},{name:"bool"}]},required:!1},dataKey:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1},filter:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"},{name:"bool"}]},required:!1},groupBy:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1},listComponent:{description:"",type:{name:"union",value:[{name:"element"},{name:"func"}]},required:!1},tagOptionComponent:{description:"",type:{name:"union",value:[{name:"element"},{name:"func"}]},required:!1},textField:{description:"",type:{name:"union",value:[{name:"string"},{name:"func"}]},required:!1},renderListGroup:{description:"",type:{name:"func"},required:!1},renderListItem:{description:"",type:{name:"func"},required:!1},renderTagValue:{description:"",type:{name:"func"},required:!1}}};export{ce as M};
